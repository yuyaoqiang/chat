{"code":"(this[\"webpackJsonpadvisory-h5\"]=this[\"webpackJsonpadvisory-h5\"]||[]).push([[20],{175:function(e,t,a){},176:function(e,t,a){\"use strict\";var c=a(7),n=a(0),i=a(5),s=a(174),l=function(){var e=Object(n.useState)(\"http://ayx.ltd/kefu/5fe0753addc8c\"),t=Object(s.a)(e,1)[0];return{onService:function(){var e=document.createElement(\"a\");e.setAttribute(\"href\",t),e.setAttribute(\"target\",\"_blank\"),e.setAttribute(\"id\",\"online\"),document.getElementById(\"online\")||document.body.appendChild(e),e.click()},onlineService:t}};a(175),t.a=function(e){var t=Object(i.g)(),a=(l().onService,e.goback),n=e.title,s=e.rightTitle,r=e.cb;return Object(c.jsx)(\"header\",{className:\"header-wrap\",children:Object(c.jsxs)(\"ul\",{className:\"container\",children:[Object(c.jsx)(\"li\",{className:\"goback\",onClick:function(){\"function\"===typeof a?a():t.replace(a)}}),Object(c.jsx)(\"li\",{className:\"title\",children:n}),Object(c.jsx)(\"li\",{className:\"title small-title\",onClick:function(){r&&r()},children:s})]})})}},216:function(e,t,a){},239:function(e,t,a){\"use strict\";a.r(t);var c=a(7),n=(a(41),a(19)),i=a.n(n),s=a(174),l=a(0),r=a(176),u=a(5),j=a(190),o=a.n(j),m=a(193),p=a.n(m),d=a(11),g=a(182),b=function(e){var t={\"Content-Type\":\"application/x-www-form-urlencoded;charset=utf-8\",taskId:e.taskId,cancelReason:e.cancelReason,remark:e.remark};return Object(d.b)(\"/api/v1/app/timing/cancel-timing-task/ack\",Object(g.stringify)(e),t)};a(216),t.default=function(){var e=Object(u.g)().goBack,t=Object(l.useState)(\"\\u6536\\u6b3e\\u8d26\\u53f7\\u5f02\\u5e38\"),a=Object(s.a)(t,2),n=a[0],j=a[1],m=Object(l.useState)(null),g=Object(s.a)(m,2),f=g[0],O=g[1],h=Object(l.useState)(null),x=Object(s.a)(h,2),k=x[0],v=x[1],N=Object(l.useState)(null),y=Object(s.a)(N,2),C=y[0],I=y[1],w=Object(l.useState)(null),S=Object(s.a)(w,2),R=S[0],A=S[1],E=Object(l.useState)(\"\"),T=Object(s.a)(E,2),U=T[0],B=T[1],D=function(e,t,a){if(e.target.files){var c=e.target.files[0];if(c){var n={};p.a.getData(c,(function(){n=p.a.getAllTags(c)}));var s=new FormData;o()(c,{quality:.1}).then((function(e){a(e.base64),s.append(\"file\",e.file,c.name),i.a.loading(\"\\u4e0a\\u4f20\\u4e2d...\",0),function(e,t){return Object(d.d)(\"/api/v1/app/timing/cancel-timing-task/upload-img\",e,t)}(s,{taskId:f.taskOrderId,appPackageNameEncoded:n.UserComment,imgCreateTime:n.Artist,imgIndex:t}).then((function(e){i.a.success(\"\\u4e0a\\u4f20\\u6210\\u529f\")})).catch((function(e){i.a.fail(e.response&&e.response.data&&e.response.data.message||\"\\u63d0\\u4ea4\\u51fa\\u9519 \")}))}))}}},F=function(){var e;(e={},Object(d.a)(\"/api/v1/app/timing/my-task-detail\",e)).then((function(e){O(e)}))};return Object(l.useEffect)((function(){F()}),[]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(r.a,{goback:e,title:\"\\u53d6\\u6d88\\u4ed8\\u6b3e\"}),Object(c.jsxs)(\"p\",{className:\"select-wrap\",children:[Object(c.jsx)(\"span\",{children:\"\\u53d6\\u6d88\\u539f\\u56e0*\"}),Object(c.jsxs)(\"select\",{className:\"select\",onChange:function(e){return j(e.target.value)},children:[Object(c.jsx)(\"option\",{value:\"\\u6536\\u6b3e\\u8d26\\u53f7\\u5f02\\u5e38\",children:\"\\u6536\\u6b3e\\u8d26\\u53f7\\u5f02\\u5e38\"}),Object(c.jsx)(\"option\",{value:\"\\u81ea\\u8eab\\u8d44\\u91d1\\u4e0d\\u8db3\",children:\"\\u81ea\\u8eab\\u8d44\\u91d1\\u4e0d\\u8db3\"}),Object(c.jsx)(\"option\",{value:\"\\u5176\\u4ed6\",children:\"\\u5176\\u4ed6\"})]})]}),Object(c.jsxs)(\"p\",{className:\"select-wrap\",children:[Object(c.jsx)(\"span\",{children:\"\\u8bf4\\u660e*\"}),Object(c.jsx)(\"textarea\",{rows:4,maxLength:30,className:\"select\",onChange:function(e){return B(e.target.value)}})]}),Object(c.jsxs)(\"div\",{className:\"timer-update\",children:[Object(c.jsxs)(\"p\",{className:\"vlidate\",children:[Object(c.jsx)(\"span\",{children:\"*\"}),\"\\u4e0a\\u4f20\\u51ed\\u8bc1\"]}),Object(c.jsxs)(\"p\",{className:\"update-wrap\",children:[Object(c.jsxs)(\"span\",{className:\"update-img\",children:[k&&Object(c.jsx)(\"img\",{className:\"task-img\",src:k}),Object(c.jsx)(\"input\",{type:\"file\",accept:\"image/png, image/jpeg, image/gif, image/jpg\",multiple:!1,onChange:function(e){return D(e,1,v)}})]}),Object(c.jsxs)(\"span\",{className:\"update-img\",children:[C&&Object(c.jsx)(\"img\",{className:\"task-img\",src:C}),Object(c.jsx)(\"input\",{type:\"file\",accept:\"image/png, image/jpeg, image/gif, image/jpg\",multiple:!1,onChange:function(e){return D(e,2,I)}})]}),Object(c.jsxs)(\"span\",{className:\"update-img\",children:[R&&Object(c.jsx)(\"img\",{className:\"task-img\",src:R}),Object(c.jsx)(\"input\",{type:\"file\",accept:\"image/png, image/jpeg, image/gif, image/jpg\",multiple:!1,onChange:function(e){return D(e,3,A)}})]})]})]}),Object(c.jsx)(\"p\",{className:\"submit-btn\",onClick:function(){if(U){var t=encodeURI(n),a=encodeURI(U);if(\"\\u6536\\u6b3e\\u8d26\\u53f7\\u5f02\\u5e38\"===n)return k||C||R?(i.a.loading(\"\\u63d0\\u4ea4\\u4e2d...\",0),void b({taskId:f.taskOrderId,cancelReason:t,remark:a}).then((function(t){i.a.success(\"\\u63d0\\u4ea4\\u6210\\u529f\"),e()}))):void i.a.info(\"\\u9700\\u8981\\u4e0a\\u4f20\\u51ed\\u8bc1\");i.a.loading(\"\\u63d0\\u4ea4\\u4e2d...\",0),b({taskId:f.taskOrderId,cancelReason:t,remark:a}).then((function(t){i.a.success(\"\\u63d0\\u4ea4\\u6210\\u529f\"),e()}))}else i.a.info(\"\\u9700\\u8981\\u586b\\u5199\\u5907\\u6ce8\")},children:\"\\u63d0\\u4ea4\"})]})}}}]);","name":"static/js/20.01680278.chunk.js","input":"(this[\"webpackJsonpadvisory-h5\"] = this[\"webpackJsonpadvisory-h5\"] || []).push([[20],{\n\n/***/ 175:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 176:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(7);\n\n// EXTERNAL MODULE: external \"React\"\nvar external_React_ = __webpack_require__(0);\n\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js\nvar react_router = __webpack_require__(5);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(174);\n\n// CONCATENATED MODULE: ./src/hooks/useServiceHooks.tsx\nvar useServiceHooks_useOnlineServiceHooks=function useOnlineServiceHooks(){var _useState=Object(external_React_[\"useState\"])(\"http://ayx.ltd/kefu/5fe0753addc8c\"),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,1),onlineService=_useState2[0];var onService=function onService(){var a=document.createElement(\"a\");a.setAttribute(\"href\",onlineService);a.setAttribute(\"target\",\"_blank\");a.setAttribute(\"id\",\"online\");// 防止反复添加\nif(!document.getElementById('online')){document.body.appendChild(a);}a.click();};return{onService:onService,onlineService:onlineService};};/* harmony default export */ var useServiceHooks = (useServiceHooks_useOnlineServiceHooks);\n// EXTERNAL MODULE: ./src/components/header/style.scss\nvar style = __webpack_require__(175);\n\n// CONCATENATED MODULE: ./src/components/header/index.tsx\nvar header_HeaderBar=function HeaderBar(props){var history=Object(react_router[\"g\" /* useHistory */])();var _useServiceHooks=useServiceHooks(),onService=_useServiceHooks.onService;var goback=props.goback,title=props.title,rightTitle=props.rightTitle,cb=props.cb;var to=function to(){if(typeof goback==='function'){goback();}else{history.replace(goback);}};return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"header\",{className:\"header-wrap\",children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"ul\",{className:\"container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{className:\"goback\",onClick:to}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{className:\"title\",children:title}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{className:\"title small-title\",onClick:function onClick(){cb&&cb();},children:rightTitle})]})});};/* harmony default export */ var header = __webpack_exports__[\"a\"] = (header_HeaderBar);\n\n/***/ }),\n\n/***/ 216:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 239:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(7);\n\n// EXTERNAL MODULE: ./node_modules/antd-mobile/lib/toast/style/css.js\nvar css = __webpack_require__(41);\n\n// EXTERNAL MODULE: ./node_modules/antd-mobile/lib/toast/index.js\nvar toast = __webpack_require__(19);\nvar toast_default = /*#__PURE__*/__webpack_require__.n(toast);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(174);\n\n// EXTERNAL MODULE: external \"React\"\nvar external_React_ = __webpack_require__(0);\n\n// EXTERNAL MODULE: ./src/components/header/index.tsx + 1 modules\nvar components_header = __webpack_require__(176);\n\n// EXTERNAL MODULE: ./node_modules/react-router/esm/react-router.js\nvar react_router = __webpack_require__(5);\n\n// EXTERNAL MODULE: ./node_modules/lrz/dist/lrz.all.bundle.js\nvar lrz_all_bundle = __webpack_require__(190);\nvar lrz_all_bundle_default = /*#__PURE__*/__webpack_require__.n(lrz_all_bundle);\n\n// EXTERNAL MODULE: ./node_modules/exif-js/exif.js\nvar exif = __webpack_require__(193);\nvar exif_default = /*#__PURE__*/__webpack_require__.n(exif);\n\n// EXTERNAL MODULE: ./src/request/api.ts\nvar api = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./node_modules/querystring-es3/index.js\nvar querystring_es3 = __webpack_require__(182);\n\n// CONCATENATED MODULE: ./src/pages/offTimer/request.ts\n// 取消任务上传图\nvar request_cancelTaskUpload=function cancelTaskUpload(data,params){return Object(api[\"d\" /* upload */])('/api/v1/app/timing/cancel-timing-task/upload-img',data,params);};// 查询我的限时任务详情\nvar request_myTaskDetail=function myTaskDetail(data){return Object(api[\"a\" /* get */])('/api/v1/app/timing/my-task-detail',data);};// 限时任务取消完成\nvar request_cancelAckTiming=function cancelAckTiming(data){var header={'Content-Type':'application/x-www-form-urlencoded;charset=utf-8',taskId:data.taskId,cancelReason:data.cancelReason,remark:data.remark};return Object(api[\"b\" /* post */])('/api/v1/app/timing/cancel-timing-task/ack',Object(querystring_es3[\"stringify\"])(data),header);};\n// EXTERNAL MODULE: ./src/pages/offTimer/style.scss\nvar style = __webpack_require__(216);\n\n// CONCATENATED MODULE: ./src/pages/offTimer/index.tsx\n//@ts-ignore\n//@ts-ignore\n//@ts-ignore\nvar offTimer_OffTimer=function OffTimer(){var _useHistory=Object(react_router[\"g\" /* useHistory */])(),goBack=_useHistory.goBack;var _useState=Object(external_React_[\"useState\"])(\"收款账号异常\"),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),selectValue=_useState2[0],setSelectValue=_useState2[1];var _useState3=Object(external_React_[\"useState\"])(null),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),detail=_useState4[0],setDetail=_useState4[1];var _useState5=Object(external_React_[\"useState\"])(null),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),imgData=_useState6[0],setImgData=_useState6[1];var _useState7=Object(external_React_[\"useState\"])(null),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),imgData2=_useState8[0],setImgData2=_useState8[1];var _useState9=Object(external_React_[\"useState\"])(null),_useState10=Object(slicedToArray[\"a\" /* default */])(_useState9,2),imgData3=_useState10[0],setImgData3=_useState10[1];var _useState11=Object(external_React_[\"useState\"])(\"\"),_useState12=Object(slicedToArray[\"a\" /* default */])(_useState11,2),remark=_useState12[0],setRemark=_useState12[1];var _onChange=function onChange(e,index,cb){if(!e.target.files)return;var file=e.target.files[0];if(!file)return;var obj={};exif_default.a.getData(file,function(){obj=exif_default.a.getAllTags(file);});var data=new FormData();lrz_all_bundle_default()(file,{quality:0.1}).then(function(rst){cb(rst.base64);//@ts-ignore\ndata.append(\"file\",rst.file,file.name);toast_default.a.loading(\"上传中...\",0);request_cancelTaskUpload(data,{taskId:detail.taskOrderId,appPackageNameEncoded:obj.UserComment,imgCreateTime:obj.Artist,imgIndex:index}).then(function(data){toast_default.a.success(\"上传成功\");}).catch(function(err){toast_default.a.fail(err.response&&err.response.data&&err.response.data.message||'提交出错 ');});});};var submit=function submit(){if(!remark){toast_default.a.info(\"需要填写备注\");return;}var cancelReason=encodeURI(selectValue);var remarks=encodeURI(remark);if(selectValue===\"收款账号异常\"){if(imgData||imgData2||imgData3){toast_default.a.loading(\"提交中...\",0);request_cancelAckTiming({taskId:detail.taskOrderId,cancelReason:cancelReason,remark:remarks}).then(function(data){toast_default.a.success(\"提交成功\");goBack();});return;}toast_default.a.info(\"需要上传凭证\");return;}else{toast_default.a.loading(\"提交中...\",0);request_cancelAckTiming({taskId:detail.taskOrderId,cancelReason:cancelReason,remark:remarks}).then(function(data){toast_default.a.success(\"提交成功\");goBack();});}};var myTaskDetailHandle=function myTaskDetailHandle(){request_myTaskDetail({}).then(function(data){setDetail(data);});};Object(external_React_[\"useEffect\"])(function(){myTaskDetailHandle();},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(components_header[\"a\" /* default */],{goback:goBack,title:\"取消付款\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{className:\"select-wrap\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:\"\\u53D6\\u6D88\\u539F\\u56E0*\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"select\",{className:\"select\",onChange:function onChange(e){return setSelectValue(e.target.value);},children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"\\u6536\\u6B3E\\u8D26\\u53F7\\u5F02\\u5E38\",children:\"\\u6536\\u6B3E\\u8D26\\u53F7\\u5F02\\u5E38\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"\\u81EA\\u8EAB\\u8D44\\u91D1\\u4E0D\\u8DB3\",children:\"\\u81EA\\u8EAB\\u8D44\\u91D1\\u4E0D\\u8DB3\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"option\",{value:\"\\u5176\\u4ED6\",children:\"\\u5176\\u4ED6\"})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{className:\"select-wrap\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:\"\\u8BF4\\u660E*\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"textarea\",{rows:4,maxLength:30,className:\"select\",onChange:function onChange(e){return setRemark(e.target.value);}})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"timer-update\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{className:\"vlidate\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\",{children:\"*\"}),\"\\u4E0A\\u4F20\\u51ED\\u8BC1\"]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"p\",{className:\"update-wrap\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{className:\"update-img\",children:[imgData&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{className:\"task-img\",src:imgData}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"file\",accept:\"image/png, image/jpeg, image/gif, image/jpg\",multiple:false,onChange:function onChange(e){return _onChange(e,1,setImgData);}})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{className:\"update-img\",children:[imgData2&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{className:\"task-img\",src:imgData2}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"file\",accept:\"image/png, image/jpeg, image/gif, image/jpg\",multiple:false,onChange:function onChange(e){return _onChange(e,2,setImgData2);}})]}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"span\",{className:\"update-img\",children:[imgData3&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{className:\"task-img\",src:imgData3}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"file\",accept:\"image/png, image/jpeg, image/gif, image/jpg\",multiple:false,onChange:function onChange(e){return _onChange(e,3,setImgData3);}})]})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{className:\"submit-btn\",onClick:submit,children:\"\\u63D0\\u4EA4\"})]});};/* harmony default export */ var offTimer = __webpack_exports__[\"default\"] = (offTimer_OffTimer);\n\n/***/ })\n\n}]);","inputSourceMap":null}