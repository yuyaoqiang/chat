{"ast":null,"code":"import\"antd-mobile/lib/list-view/style/css\";import _ListView from\"antd-mobile/lib/list-view\";import\"antd-mobile/lib/pull-to-refresh/style/css\";import _PullToRefresh from\"antd-mobile/lib/pull-to-refresh\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/yuanfang/code/advisory-h5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from\"react\";import HeaderBar from\"@components/header\";import{useHistory}from\"react-router-dom\";import{saleHistory}from\"./request\";import{observer,inject}from\"mobx-react\";import usePaginationHooks from\"@hooks/usePaginationHooks\";import\"./style.scss\";import{mm_dd_hh_mm_ss2}from\"@utils/dataTime\";import{toFixed}from\"@utils/numberUtils\";var Activity=function Activity(props){var ref=useRef(null);var _useState=useState(5),_useState2=_slicedToArray(_useState,2),containerHeieght=_useState2[0],setContainerHeight=_useState2[1];var _usePaginationHooks=usePaginationHooks({queryPages:saleHistory}),setIndicator=_usePaginationHooks.setIndicator,setRefresing=_usePaginationHooks.setRefresing,indicator=_usePaginationHooks.indicator,refreshing=_usePaginationHooks.refreshing,dataSource=_usePaginationHooks.dataSource;var _useHistory=useHistory(),goBack=_useHistory.goBack;var commonState=props.commonState;useEffect(function(){var htmlFont=Number(document.documentElement.style.fontSize.slice(0,2));var clientHeight=commonState.clientHeight;//@ts-ignore\nvar top=ReactDOM.findDOMNode(ref.current).offsetTop;setContainerHeight((clientHeight-top)/htmlFont);},[]);var row=function row(rowData,sectionID,rowID){return/*#__PURE__*/_jsxs(\"li\",{className:\"item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item-info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item-top\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"order-icon\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"order-i\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"special\",children:[\"\\xA5\",toFixed(rowData.payAmount)]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u8D5A:\",/*#__PURE__*/_jsx(\"i\",{className:\"info-icon\"}),\"\\xA5\",toFixed(rowData.bonus)]})]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"success\",children:[rowData.orderStatus==='SUCCESS'&&!rowData.copyNewOrder?/*#__PURE__*/_jsx(\"span\",{style:{color:'#45db5e'},children:\"\\u6210\\u529F\"}):null,rowData.orderStatus==='SUCCESS'&&rowData.copyNewOrder?/*#__PURE__*/_jsx(\"span\",{style:{color:'#45db5e'},children:\"\\u590D\\u5236\\u8865\\u5355\\u6210\\u529F\"}):null,rowData.orderStatus==='CHASE_SUCCESS'?/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"\\u5DF2\\u8FFD\\u56DE\"}):null,rowData.orderStatus==='NOT_RECEIVE_MONEY'&&!rowData.copyNewOrder?/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"\\u5931\\u8D25\"}):null,rowData.orderStatus==='NOT_RECEIVE_MONEY'&&rowData.copyNewOrder?/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"\\u590D\\u5236\\u8865\\u5355\\u5931\\u8D25\"}):null,rowData.orderStatus==='WAIT_USER_ACK'&&rowData.resetOrder?/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"\\u91CD\\u7F6E\\u786E\\u8BA4\"}):null,rowData.orderStatus==='WAIT_USER_ACK'&&rowData.dropOrder?/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"\\u6389\\u5355.\\u5F85\\u786E\\u8BA4\"}):null,rowData.orderStatus==='WAIT_USER_ACK'&&rowData.copyNewOrder?/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"\\u590D\\u5236\\u8865\\u5355.\\u5F85\\u786E\\u8BA4\"}):null,rowData.orderStatus==='WAIT_USER_ACK'&&!rowData.resetOrder&&!rowData.dropOrder&&!rowData.copyNewOrder?/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"\\u7B49\\u5F85\\u4F1A\\u5458\\u786E\\u8BA4\"}):null,rowData.orderStatus==='SUBMIT_TIMEOUT'?/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"\\u786E\\u8BA4\\u8D85\\u65F6\"}):null,rowData.orderStatus==='WAIT_PLATFORM_CHECK_FOR_NOT_RECEIVE'?/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:\"\\u5F85\\u5BA1\\u6838\\u672A\\u5230\\u6B3E\"}):null]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-bank\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u94F6\\u884C\\u5361\\u53F7:\",rowData.bankCardNo]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u59D3\\u540D:\",rowData.payerName]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-order\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u8BA2\\u5355\\u7F16\\u53F7:\",rowData.orderId]}),/*#__PURE__*/_jsx(\"span\",{style:{flex:'1 1 30%',textAlign:'end'},children:mm_dd_hh_mm_ss2(rowData.payTime)})]})]},rowID);};return/*#__PURE__*/_jsxs(\"div\",{className:\"consignment-record-wrap\",children:[/*#__PURE__*/_jsx(HeaderBar,{goback:goBack,title:\"代售记录\"}),/*#__PURE__*/_jsx(_ListView,{className:\"consignments\",ref:ref,style:{height:\"\".concat(containerHeieght,\"rem\")},dataSource:dataSource,renderFooter:function renderFooter(){return/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center'},children:!indicator?'正在加载中.....':'没有更多数据'});},renderRow:row,useBodyScroll:false//@ts-ignore\n,pullToRefresh:/*#__PURE__*/_jsx(_PullToRefresh,{refreshing:refreshing,onRefresh:setRefresing}),onEndReached:setIndicator,pageSize:20})]});};export default inject('commonState')(observer(Activity));","map":null,"metadata":{},"sourceType":"module"}