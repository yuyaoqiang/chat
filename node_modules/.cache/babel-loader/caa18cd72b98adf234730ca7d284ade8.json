{"ast":null,"code":"import _initializerDefineProperty from \"/Users/yuanfang/code/advisory-h5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/initializerDefineProperty\";\nimport _applyDecoratedDescriptor from \"/Users/yuanfang/code/advisory-h5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"/Users/yuanfang/code/advisory-h5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/initializerWarningHelper\";\n\nvar _class, _descriptor, _descriptor2, _descriptor3, _temp;\n\nimport { observable, computed, action, makeObservable, autorun } from \"mobx\";\nlet UserState = (_class = (_temp = class UserState {\n  constructor() {\n    _initializerDefineProperty(this, \"user\", _descriptor, this);\n\n    _initializerDefineProperty(this, \"logout\", _descriptor2, this);\n\n    _initializerDefineProperty(this, \"updateUser\", _descriptor3, this);\n\n    makeObservable(this);\n    autorun(() => {\n      const userStr = sessionStorage.getItem('user');\n\n      if (userStr) {\n        this.updateUser(JSON.parse(userStr));\n      }\n    });\n  }\n\n  get msg() {\n    return `${this.user.mobilePhone}`;\n  }\n\n}, _temp), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"user\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return {\n      Authorization: \"\",\n      isLogin: false\n    };\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"logout\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return () => {\n      this.user.isLogin = false;\n      sessionStorage.clear();\n    };\n  }\n}), _descriptor3 = _applyDecoratedDescriptor(_class.prototype, \"updateUser\", [action], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function () {\n    return user => {\n      this.user = user;\n      sessionStorage.setItem('user', JSON.stringify(user));\n    };\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"msg\", [computed], Object.getOwnPropertyDescriptor(_class.prototype, \"msg\"), _class.prototype)), _class);\nexport default UserState;","map":{"version":3,"sources":["/Users/yuanfang/code/advisory-h5/src/pages/userInfo/stroe.ts"],"names":["observable","computed","action","makeObservable","autorun","UserState","constructor","userStr","sessionStorage","getItem","updateUser","JSON","parse","msg","user","mobilePhone","Authorization","isLogin","clear","setItem","stringify"],"mappings":";;;;;;AAAA,SAASA,UAAT,EAAqBC,QAArB,EAA+BC,MAA/B,EAAuCC,cAAvC,EAAuDC,OAAvD,QAAsE,MAAtE;IACMC,S,sBAAN,MAAMA,SAAN,CAAgB;AACdC,EAAAA,WAAW,GAAG;AAAA;;AAAA;;AAAA;;AACZH,IAAAA,cAAc,CAAC,IAAD,CAAd;AACAC,IAAAA,OAAO,CAAC,MAAM;AACZ,YAAMG,OAAO,GAAGC,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAAhB;;AACA,UAAIF,OAAJ,EAAa;AACX,aAAKG,UAAL,CAAgBC,IAAI,CAACC,KAAL,CAAWL,OAAX,CAAhB;AACD;AACF,KALM,CAAP;AAMD;;AAmBD,MAAcM,GAAd,GAAoB;AAClB,WAAQ,GAAE,KAAKC,IAAL,CAAUC,WAAY,EAAhC;AACD;;AA9Ba,C,8EAWbf,U;;;;;WAAuB;AACtBgB,MAAAA,aAAa,EAAE,EADO;AAEtBC,MAAAA,OAAO,EAAE;AAFa,K;;0EAMvBf,M;;;;;WAAgB,MAAM;AACrB,WAAKY,IAAL,CAAUG,OAAV,GAAoB,KAApB;AACAT,MAAAA,cAAc,CAACU,KAAf;AACD,K;;8EAGAhB,M;;;;;WAAqBY,IAAD,IAAoB;AACvC,WAAKA,IAAL,GAAYA,IAAZ;AACAN,MAAAA,cAAc,CAACW,OAAf,CAAuB,MAAvB,EAA+BR,IAAI,CAACS,SAAL,CAAeN,IAAf,CAA/B;AACD,K;;wDAEAb,Q;AAIH,eAAeI,SAAf","sourcesContent":["import { observable, computed, action, makeObservable, autorun } from \"mobx\";\nclass UserState {\n  constructor() {\n    makeObservable(this)\n    autorun(() => {\n      const userStr = sessionStorage.getItem('user');\n      if (userStr) {\n        this.updateUser(JSON.parse(userStr));\n      }\n    })\n  }\n\n  @observable user: any = {\n    Authorization: \"\",\n    isLogin: false,\n\n  }\n\n  @action logout = () => {\n    this.user.isLogin = false;\n    sessionStorage.clear();\n  }\n\n  //登录成功后更新用户\n  @action updateUser = (user: UserData) => {\n    this.user = user\n    sessionStorage.setItem('user', JSON.stringify(user))\n  }\n\n  @computed get msg() {\n    return `${this.user.mobilePhone}`\n  }\n}\nexport default UserState;"]},"metadata":{},"sourceType":"module"}