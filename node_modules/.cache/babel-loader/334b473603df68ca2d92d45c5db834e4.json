{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/yuanfang/Downloads/Telegram Desktop/\\u5C01\\u5B58/advisory-h5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from\"react\";import NavBar from\"@components/navBar\";import TimerList from\"./component/list\";import TimerInfo from\"./component/info\";import Tasks from\"./component/task\";//@ts-ignore\nimport sound from\"./img/order_done.mp3\";import{timingTasks}from\"./request\";import{observer,inject}from\"mobx-react\";import'./style.scss';import{checkSound}from\"@utils/sound\";var TimeMission=function TimeMission(props){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),checkTab=_useState2[0],setCheckTab=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),transType=_useState4[0],setTransType=_useState4[1];var banksState=props.banksState;var mapBanks=banksState.mapBanks;var soundControl=useRef();var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),data=_useState6[0],setData=_useState6[1];var timingTasksHandle=function timingTasksHandle(){timingTasks({}).then(function(res){soundControl.current&&soundControl.current.pause();var newData=[];var oldData=[];res.map(function(item){return newData.push(item.taskId);});data.map(function(item){return oldData.push(item.taskId);});var isHas=newData.filter(function(v){return oldData.indexOf(v)==-1;});if(isHas.length>0){try{checkSound()&&soundControl.current.play();}catch(error){}setData(res);}});};useEffect(function(){timingTasksHandle();var id=setInterval(function(){timingTasksHandle();},3000);return function(){return clearInterval(id);};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"timeMission-wrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"span\",{className:checkTab===1?\"check\":\"\",onClick:function onClick(){return setCheckTab(1);},children:\"\\u4EFB\\u52A1\\u5217\\u8868\"}),/*#__PURE__*/_jsx(\"span\",{className:checkTab===2?\"check\":\"\",onClick:function onClick(){return setCheckTab(2);},children:\"\\u6211\\u7684\\u4EFB\\u52A1\"}),/*#__PURE__*/_jsx(\"span\",{className:checkTab===3?\"check\":\"\",onClick:function onClick(){return setCheckTab(3);},children:\"\\u4EFB\\u52A1\\u8BB0\\u5F55\"})]}),/*#__PURE__*/_jsx(\"audio\",{src:sound,ref:soundControl,preload:\"\"}),checkTab===1&&/*#__PURE__*/_jsxs(\"div\",{className:\"transforms-wrap\",children:[/*#__PURE__*/_jsxs(\"p\",{className:transType?\"transform-check\":\"\",onClick:function onClick(){return setTransType(true);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bank-card-icon\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u94F6\\u884C\\u5361\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:!transType?\"transform-check\":\"\",onClick:function onClick(){return setTransType(false);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"ali-pay-icon\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u652F\\u4ED8\\u5B9D\"})]})]}),checkTab===1&&/*#__PURE__*/_jsx(TimerList,{transType:transType,data:data,mapBanks:mapBanks,setCheckTab:setCheckTab}),checkTab===2&&/*#__PURE__*/_jsx(TimerInfo,{mapBanks:mapBanks,onClick:function onClick(){return setCheckTab(3);}}),checkTab===3&&/*#__PURE__*/_jsx(Tasks,{}),/*#__PURE__*/_jsx(NavBar,{})]});};export default inject('homeState','banksState')(observer(TimeMission));","map":{"version":3,"sources":["/Users/yuanfang/Downloads/Telegram Desktop/封存/advisory-h5/src/pages/timeMission/index.tsx"],"names":["React","useState","useEffect","useRef","NavBar","TimerList","TimerInfo","Tasks","sound","timingTasks","observer","inject","checkSound","TimeMission","props","checkTab","setCheckTab","transType","setTransType","banksState","mapBanks","soundControl","data","setData","timingTasksHandle","then","res","current","pause","newData","oldData","map","item","push","taskId","isHas","filter","v","indexOf","length","play","error","id","setInterval","clearInterval"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport NavBar from \"@components/navBar\"\nimport TimerList from \"./component/list\"\nimport TimerInfo from \"./component/info\"\nimport Tasks from \"./component/task\"\n//@ts-ignore\nimport sound from \"./img/order_done.mp3\"\nimport { timingTasks } from \"./request\"\nimport { observer, inject } from \"mobx-react\"\nimport './style.scss'\nimport { checkSound } from \"@utils/sound\";\nconst TimeMission = (props: any) => {\n   const [checkTab, setCheckTab] = useState(1);\n   const [transType, setTransType] = useState(true);\n   const { banksState } = props;\n   const { mapBanks } = banksState;\n   const soundControl = useRef<any>();\n   const [data, setData] = useState<any>([])\n   const timingTasksHandle = () => {\n      timingTasks({}).then((res: any) => {\n         soundControl.current && soundControl.current.pause()\n         let newData: any = []\n         let oldData: any = []\n         res.map((item: any) => newData.push(item.taskId))\n         data.map((item: any) => oldData.push(item.taskId))\n         let isHas = newData.filter((v: any) => { return oldData.indexOf(v) == -1 })\n         if (isHas.length > 0) {\n            try {\n               checkSound() && soundControl.current.play();\n            } catch (error) {\n            }\n            setData(res)\n         }\n      })\n   }\n   useEffect(() => {\n      timingTasksHandle();\n      const id = setInterval(() => {\n         timingTasksHandle();\n      }, 3000);\n      return () => clearInterval(id);\n   }, [])\n\n   return (\n      <div className=\"timeMission-wrap\">\n         <div className=\"header\">\n            <span className={checkTab === 1 ? \"check\" : \"\"} onClick={() => setCheckTab(1)}>任务列表</span>\n            <span className={checkTab === 2 ? \"check\" : \"\"} onClick={() => setCheckTab(2)}>我的任务</span>\n            <span className={checkTab === 3 ? \"check\" : \"\"} onClick={() => setCheckTab(3)}>任务记录</span>\n         </div>\n         <audio src={sound} ref={soundControl} preload=\"\" />\n         {checkTab === 1 && (\n            <div className=\"transforms-wrap\">\n               <p className={transType ? \"transform-check\" : \"\"} onClick={() => setTransType(true)}>\n                  <i className=\"bank-card-icon\"></i>\n                  <span>银行卡</span>\n               </p>\n               <p className={!transType ? \"transform-check\" : \"\"} onClick={() => setTransType(false)}>\n                  <i className=\"ali-pay-icon\"></i>\n                  <span>支付宝</span>\n               </p>\n            </div>\n         )}\n\n         {checkTab === 1 && <TimerList transType={transType} data={data} mapBanks={mapBanks} setCheckTab={setCheckTab} />}\n         {checkTab === 2 && <TimerInfo mapBanks={mapBanks} onClick={() => setCheckTab(3)} />}\n         {checkTab === 3 && <Tasks />}\n         <NavBar />\n      </div>\n   )\n}\nexport default inject('homeState', 'banksState')((observer(TimeMission)));"]},"metadata":{},"sourceType":"module"}