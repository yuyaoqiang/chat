{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport \"antd-mobile/lib/toast/style/css\";\nimport _Toast from \"antd-mobile/lib/toast\";\n\nvar _jsxFileName = \"/Users/yuanfang/code/advisory-h5/src/pages/offTimer/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport HeaderBar from \"@components/header\";\nimport { useHistory } from \"react-router-dom\";\n//@ts-ignore\nimport lrz from \"lrz\"; //@ts-ignore\n\nimport EXIF from \"exif-js\";\nimport { cancelTaskUpload, myTaskDetail, cancelAckTiming } from \"./request\"; //@ts-ignore\n\nimport './style.scss';\n\nconst OffTimer = () => {\n  _s();\n\n  const {\n    goBack\n  } = useHistory();\n  const [selectValue, setSelectValue] = useState(\"收款账号异常\");\n  const [detail, setDetail] = useState(null);\n  const [imgData, setImgData] = useState(null);\n  const [imgData2, setImgData2] = useState(null);\n  const [imgData3, setImgData3] = useState(null);\n  const [remark, setRemark] = useState(\"\");\n\n  const onChange = (e, index, cb) => {\n    if (!e.target.files) return;\n    const file = e.target.files[0];\n    if (!file) return;\n    let obj = {};\n    EXIF.getData(file, function () {\n      obj = EXIF.getAllTags(file);\n    });\n    let data = new FormData();\n    lrz(file, {\n      quality: 0.1\n    }).then(function (rst) {\n      cb(rst.base64); //@ts-ignore\n\n      data.append(\"file\", rst.file, file.name);\n\n      _Toast.loading(\"上传中...\", 0);\n\n      cancelTaskUpload(data, {\n        taskId: detail.taskOrderId,\n        appPackageNameEncoded: obj.UserComment,\n        imgCreateTime: obj.Artist,\n        imgIndex: index\n      }).then(data => {\n        _Toast.success(\"上传成功\");\n      }).catch(err => {\n        _Toast.fail(err.response && err.response.data && err.response.data.message || '提交出错 ');\n      });\n    });\n  };\n\n  const submit = () => {\n    if (!remark) {\n      _Toast.info(\"需要填写备注\");\n\n      return;\n    }\n\n    const cancelReason = encodeURI(selectValue);\n    const remarks = encodeURI(remark);\n\n    if (selectValue === \"收款账号异常\") {\n      if (imgData || imgData2 || imgData3) {\n        _Toast.loading(\"提交中...\", 0);\n\n        cancelAckTiming({\n          taskId: detail.taskOrderId,\n          cancelReason,\n          remark: remarks\n        }).then(data => {\n          _Toast.success(\"提交成功\");\n\n          goBack();\n        });\n        return;\n      }\n\n      _Toast.info(\"需要上传凭证\");\n\n      return;\n    } else {\n      _Toast.loading(\"提交中...\", 0);\n\n      cancelAckTiming({\n        taskId: detail.taskOrderId,\n        cancelReason,\n        remark: remarks\n      }).then(data => {\n        _Toast.success(\"提交成功\");\n\n        goBack();\n      });\n    }\n  };\n\n  const myTaskDetailHandle = () => {\n    myTaskDetail({}).then(data => {\n      setDetail(data);\n    });\n  };\n\n  useEffect(() => {\n    myTaskDetailHandle();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(HeaderBar, {\n      goback: goBack,\n      title: \"取消付款\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 10\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"select-wrap\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\u53D6\\u6D88\\u539F\\u56E0*\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"select\",\n        onChange: e => setSelectValue(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\\u6536\\u6B3E\\u8D26\\u53F7\\u5F02\\u5E38\",\n          children: \"\\u6536\\u6B3E\\u8D26\\u53F7\\u5F02\\u5E38\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\\u81EA\\u8EAB\\u8D44\\u91D1\\u4E0D\\u8DB3\",\n          children: \"\\u81EA\\u8EAB\\u8D44\\u91D1\\u4E0D\\u8DB3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\\u5176\\u4ED6\",\n          children: \"\\u5176\\u4ED6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 16\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 10\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"select-wrap\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\u8BF4\\u660E*\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        rows: 4,\n        maxLength: 30,\n        className: \"select\",\n        onChange: e => setRemark(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 10\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"timer-update\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"vlidate\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 36\n        }, this), \"\\u4E0A\\u4F20\\u51ED\\u8BC1\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"update-wrap\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"update-img\",\n          children: [imgData && /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"task-img\",\n            src: imgData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 31\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"image/png, image/jpeg, image/gif, image/jpg\",\n            multiple: false,\n            onChange: e => onChange(e, 1, setImgData)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"update-img\",\n          children: [imgData2 && /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"task-img\",\n            src: imgData2\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 32\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"image/png, image/jpeg, image/gif, image/jpg\",\n            multiple: false,\n            onChange: e => onChange(e, 2, setImgData2)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"update-img\",\n          children: [imgData3 && /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"task-img\",\n            src: imgData3\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 32\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"image/png, image/jpeg, image/gif, image/jpg\",\n            multiple: false,\n            onChange: e => onChange(e, 3, setImgData3)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 16\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 10\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"submit-btn\",\n      onClick: submit,\n      children: \"\\u63D0\\u4EA4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 10\n    }, this)]\n  }, void 0, true);\n};\n\n_s(OffTimer, \"b+QRJDaxgMpGkJAEUSTd0mN6+g4=\", false, function () {\n  return [useHistory];\n});\n\n_c = OffTimer;\nexport default OffTimer;\n\nvar _c;\n\n$RefreshReg$(_c, \"OffTimer\");","map":{"version":3,"sources":["/Users/yuanfang/code/advisory-h5/src/pages/offTimer/index.tsx"],"names":["React","useEffect","useState","HeaderBar","useHistory","lrz","EXIF","cancelTaskUpload","myTaskDetail","cancelAckTiming","OffTimer","goBack","selectValue","setSelectValue","detail","setDetail","imgData","setImgData","imgData2","setImgData2","imgData3","setImgData3","remark","setRemark","onChange","e","index","cb","target","files","file","obj","getData","getAllTags","data","FormData","quality","then","rst","base64","append","name","loading","taskId","taskOrderId","appPackageNameEncoded","UserComment","imgCreateTime","Artist","imgIndex","success","catch","err","fail","response","message","submit","info","cancelReason","encodeURI","remarks","myTaskDetailHandle","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport HeaderBar from \"@components/header\"\nimport { useHistory } from \"react-router-dom\";\nimport { Toast } from \"antd-mobile\"\n//@ts-ignore\nimport lrz from \"lrz\"\n//@ts-ignore\nimport EXIF from \"exif-js\"\nimport { cancelTaskUpload, myTaskDetail, cancelAckTiming } from \"./request\"\n//@ts-ignore\nimport './style.scss'\nconst OffTimer = () => {\n   const { goBack } = useHistory();\n   const [selectValue, setSelectValue] = useState<string>(\"收款账号异常\");\n   const [detail, setDetail] = useState<any>(null)\n   const [imgData, setImgData] = useState<any>(null)\n   const [imgData2, setImgData2] = useState<any>(null)\n   const [imgData3, setImgData3] = useState<any>(null)\n   const [remark, setRemark] = useState<any>(\"\")\n\n   const onChange = (e: any, index: number, cb: Function) => {\n      if (!e.target.files) return\n      const file = e.target.files[0];\n      if (!file) return;\n      let obj: any = {}\n      EXIF.getData(file, function () {\n         obj = EXIF.getAllTags(file);\n      });\n      let data = new FormData();\n      lrz(file, { quality: 0.1 }).then(function (rst: any) {\n         cb(rst.base64)\n         //@ts-ignore\n         data.append(\"file\", rst.file, file.name)\n         Toast.loading(\"上传中...\", 0)\n         cancelTaskUpload(data, { taskId: detail.taskOrderId, appPackageNameEncoded: obj.UserComment, imgCreateTime: obj.Artist, imgIndex: index }).then(data => {\n            Toast.success(\"上传成功\");\n         }).catch(err => {\n            Toast.fail(err.response && err.response.data && err.response.data.message || '提交出错 ')\n         })\n      })\n   }\n   const submit = () => {\n      if (!remark) {\n         Toast.info(\"需要填写备注\")\n         return;\n      }\n      const cancelReason = encodeURI(selectValue)\n      const remarks = encodeURI(remark)\n      if (selectValue === \"收款账号异常\") {\n         if (imgData || imgData2 || imgData3) {\n            Toast.loading(\"提交中...\", 0)\n            cancelAckTiming({ taskId: detail.taskOrderId, cancelReason, remark: remarks }).then(data => {\n               Toast.success(\"提交成功\");\n               goBack();\n            })\n            return;\n         }\n         Toast.info(\"需要上传凭证\")\n         return;\n      } else {\n         Toast.loading(\"提交中...\", 0)\n         cancelAckTiming({ taskId: detail.taskOrderId, cancelReason, remark: remarks }).then(data => {\n            Toast.success(\"提交成功\");\n            goBack();\n         })\n      }\n   }\n   const myTaskDetailHandle = () => {\n      myTaskDetail({}).then((data: any) => {\n         setDetail(data)\n      })\n   }\n   useEffect(() => {\n      myTaskDetailHandle()\n   }, [])\n   return (\n      <>\n         <HeaderBar goback={goBack} title={\"取消付款\"} />\n         <p className=\"select-wrap\">\n            <span>取消原因*</span>\n            <select className=\"select\" onChange={(e) => setSelectValue(e.target.value)}>\n               <option value=\"收款账号异常\">收款账号异常</option>\n               <option value=\"自身资金不足\">自身资金不足</option>\n               <option value=\"其他\">其他</option>\n            </select>\n         </p>\n         <p className=\"select-wrap\">\n            <span>说明*</span>\n            <textarea rows={4} maxLength={30} className=\"select\" onChange={(e) => setRemark(e.target.value)}>\n            </textarea>\n         </p>\n         <div className=\"timer-update\">\n            <p className=\"vlidate\"><span>*</span>上传凭证</p>\n            <p className=\"update-wrap\">\n               <span className=\"update-img\">\n                  {imgData && <img className=\"task-img\" src={imgData} />}\n                  <input type=\"file\" accept=\"image/png, image/jpeg, image/gif, image/jpg\" multiple={false} onChange={(e) => onChange(e, 1, setImgData)} />\n               </span>\n               <span className=\"update-img\">\n                  {imgData2 && <img className=\"task-img\" src={imgData2} />}\n                  <input type=\"file\" accept=\"image/png, image/jpeg, image/gif, image/jpg\" multiple={false} onChange={(e) => onChange(e, 2, setImgData2)} />\n               </span>\n               <span className=\"update-img\">\n                  {imgData3 && <img className=\"task-img\" src={imgData3} />}\n                  <input type=\"file\" accept=\"image/png, image/jpeg, image/gif, image/jpg\" multiple={false} onChange={(e) => onChange(e, 3, setImgData3)} />\n               </span>\n            </p>\n         </div>\n         <p className=\"submit-btn\" onClick={submit}>提交</p>\n      </>\n\n   )\n}\nexport default OffTimer;"]},"metadata":{},"sourceType":"module"}