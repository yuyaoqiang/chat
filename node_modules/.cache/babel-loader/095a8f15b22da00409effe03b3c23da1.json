{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import\"antd-mobile/lib/checkbox/style/css\";import _Checkbox from\"antd-mobile/lib/checkbox\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import\"antd-mobile/lib/toast/style/css\";import _Toast from\"antd-mobile/lib/toast\";import _slicedToArray from\"/Users/yuanfang/Downloads/Telegram Desktop/\\u5C01\\u5B58/advisory-h5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from\"react\";import{saleList,receive,notReceive}from\"../request\";import{mm_dd_hh_mm_ss2}from\"@utils/dataTime\";//@ts-ignore\nimport sound from\"../img/sound.mp3\";import\"../style.scss\";import{toFixed}from\"@utils/numberUtils\";var OnSale=function OnSale(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),oneAlertState=_useState2[0],setOneAlertState=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),agentAlertState=_useState4[0],setAgentAlertState=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),unMoneyState=_useState6[0],setUnMoneyState=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),radioState=_useState8[0],setRadioState=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),data=_useState10[0],setData=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),current=_useState12[0],setCurrent=_useState12[1];var soundControl=useRef();useEffect(function(){saleListHandle();var id=setInterval(function(){saleListHandle();},3000);return function(){return clearInterval(id);};},[]);var saleListHandle=function saleListHandle(){saleList().then(function(res){_Toast.hide();soundControl.current&&soundControl.current.pause();var newData=[];var oldData=[];res.map(function(item){return newData.push(item.orderId);});data.map(function(item){return oldData.push(item.orderId);});var isHas=newData.filter(function(v){return oldData.indexOf(v)==-1;});if(isHas.length>0){try{soundControl.current.play();}catch(error){}setData(res);}});};var receiveHandle=function receiveHandle(){_Toast.loading(\"提交中...\");receive({saleItemId:current.orderId}).then(function(data){setOneAlertState(false);setAgentAlertState(false);_Toast.success(\"提交成功!\");});};var notReceiveHandle=function notReceiveHandle(){_Toast.loading(\"提交中...\");notReceive({saleItemId:current.orderId}).then(function(data){setUnMoneyState(false);setRadioState(false);_Toast.success(\"提交成功!\");});};var oneAlert=function oneAlert(){return/*#__PURE__*/_jsx(\"div\",{className:\"alert-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"on-sale-alert\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"alert-top\",children:\"\\u6536\\u6B3E\\u786E\\u8BA4\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"alert-min\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u8BF7\\u67E5\\u770B\",/*#__PURE__*/_jsx(\"i\",{children:\"\\u3010\\u94F6\\u884C\\u5361\\u3011\"}),\"\\xA5\",toFixed(current.payAmount),\"\\u662F\\u5426\\u5230\\u8D26\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"item-bank\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u94F6\\u884C\\u5361\\u53F7:\",current.bankCardNo]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u4ED8\\u6B3E\\u4EBA:\",current.payerName]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-order\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u8BA2\\u5355\\u7F16\\u53F7:\",current.orderId]}),/*#__PURE__*/_jsx(\"span\",{children:mm_dd_hh_mm_ss2(current.payTime)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"order-icon\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"order-i\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"special\",children:[\"\\xA5\",toFixed(current.payAmount)]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u8D5A:\",/*#__PURE__*/_jsx(\"i\",{className:\"info-icon\"}),\"\\xA5\",toFixed(current.bonus)]})]})]})]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"alert-bottom\",children:[/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setOneAlertState(false);},children:\"\\u53D6\\u6D88\"}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setAgentAlertState(true);},children:\"\\u5DF2\\u6536\\u5230\\u6B3E\"})]})]})});};var agentAlert=function agentAlert(){return/*#__PURE__*/_jsx(\"div\",{className:\"alert-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"on-sale-alert\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"alert-top red-bg\",children:\"\\u6536\\u6B3E\\u786E\\u8BA4\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"alert-min\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u8BF7\\u518D\\u4E09\\u786E\\u8BA4,\\u94F6\\u884C\\u5361\\xA5\",toFixed(current.payAmount),\"\\u662F\\u5426\\u5230\\u8D26\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"item-bank red-font\",children:\"\\u82E5\\u672A\\u6536\\u5230\\u6B3E\\uFF0C\\u70B9\\u51FB\\u786E\\u8BA4\\u6536\\u6B3E,\\u9020\\u6210\\u8D44\\u91D1\\u635F\\u5931\\u81EA\\u884C\\u627F\\u62C5\"}),/*#__PURE__*/_jsx(\"p\",{className:\"item-order text-min\",children:\"\\u5982\\u6709\\u4E0D\\u786E\\u5B9A\\u7684\\u8BA2\\u5355\\u8BF7\\u8054\\u7CFB\\u5BA2\\u670D\\u5904\\u7406\"})]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"alert-bottom\",children:[/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){setOneAlertState(false);setAgentAlertState(false);},children:\"\\u53D6\\u6D88\"}),/*#__PURE__*/_jsx(\"span\",{onClick:receiveHandle,children:\"\\u518D\\u6B21\\u786E\\u8BA4\"})]})]})});};var unMoneyAlert=function unMoneyAlert(){return/*#__PURE__*/_jsx(\"div\",{className:\"alert-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"on-sale-alert\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"alert-top\",children:\"\\u672A\\u6536\\u5230\\u6B3E\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"alert-min\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"yellow-font\",children:\"\\u82E5\\u5DF2\\u6536\\u5230\\u6B3E\\u9879\\u5374\\u70B9\\u51FB\\u3010\\u672A\\u6536\\u5230\\u6B3E\\u3011,\\u6838\\u5B9E\\u540E\\u53EF\\u80FD\\u4F1A\\u5931\\u53BB\\u4EE3\\u552E\\u7684\\u673A\\u4F1A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"item\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"item-bank  just-start\",children:[/*#__PURE__*/_jsx(_Checkbox,{onChange:function onChange(e){setRadioState(!radioState);}}),\" \\u6211\\u5DF2\\u8BA4\\u771F\\u9605\\u8BFB\\u4EE5\\u4E0A\\u63D0\\u793A,\\u786E\\u5B9A\\u6CA1\\u6709\\u6536\\u5230\\u6B3E\"]})})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"alert-bottom\",children:[/*#__PURE__*/_jsx(\"span\",{className:radioState?\"\":\"un-money\",onClick:notReceiveHandle,children:\"\\u672A\\u6536\\u5230\\u6B3E\"}),/*#__PURE__*/_jsx(\"span\",{className:radioState?\"\":\"un-money\",onClick:function onClick(){setUnMoneyState(false);setRadioState(false);},children:\"\\u53D6\\u6D88\"})]})]})});};var tiemAlert=function tiemAlert(){return/*#__PURE__*/_jsx(\"div\",{className:\"alert-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"on-sale-alert\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"alert-top\",children:\"\\u63D0\\u793A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"alert-min\",children:\"\\u60A8\\u6709\\u4E00\\u7B14\\u8BA2\\u5355\\u5DF2\\u8D85\\u65F6,\\u8BF7\\u786E\\u8BA4\\u662F\\u5426\\u6536\\u6B3E \\u5E76\\u53CA\\u65F6\\u5904\\u7406!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"alert-bottom\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u786E\\u5B9A\"})})]})});};return/*#__PURE__*/_jsxs(_Fragment,{children:[oneAlertState&&oneAlert(),agentAlertState&&agentAlert(),unMoneyState&&unMoneyAlert(),/*#__PURE__*/_jsxs(\"ul\",{className:\"consignments\",children:[/*#__PURE__*/_jsx(\"audio\",{src:sound,ref:soundControl,preload:\"\"}),data&&data.map(function(item){return/*#__PURE__*/_jsxs(\"li\",{className:\"item\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"item-bank\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u94F6\\u884C\\u5361\\u53F7:\",item.bankCardNo]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u4ED8\\u6B3E\\u4EBA:\",item.payerName]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-order\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u8BA2\\u5355\\u7F16\\u53F7:\",item.orderId]}),/*#__PURE__*/_jsx(\"span\",{children:mm_dd_hh_mm_ss2(item.payTime)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"order-icon\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"order-i\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"special\",children:[\"\\xA5\",toFixed(item.payAmount)]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u8D5A:\",/*#__PURE__*/_jsx(\"i\",{className:\"info-icon\"}),\"\\xA5\",toFixed(item.bonus)]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"off-money\",onClick:function onClick(){setCurrent(item);setUnMoneyState(true);},children:\"\\u672A\\u6536\\u5230\\u6B3E\"}),/*#__PURE__*/_jsx(\"span\",{className:\"on-money\",onClick:function onClick(){setCurrent(item);setOneAlertState(true);},children:\"\\u5DF2\\u6536\\u5230\\u6B3E\"})]})]},item.orderId);})]})]});};export default OnSale;","map":{"version":3,"sources":["/Users/yuanfang/Downloads/Telegram Desktop/封存/advisory-h5/src/pages/consignment/components/onSale.tsx"],"names":["React","useEffect","useRef","useState","saleList","receive","notReceive","mm_dd_hh_mm_ss2","sound","toFixed","OnSale","oneAlertState","setOneAlertState","agentAlertState","setAgentAlertState","unMoneyState","setUnMoneyState","radioState","setRadioState","data","setData","current","setCurrent","soundControl","saleListHandle","id","setInterval","clearInterval","then","res","hide","pause","newData","oldData","map","item","push","orderId","isHas","filter","v","indexOf","length","play","error","receiveHandle","loading","saleItemId","success","notReceiveHandle","oneAlert","payAmount","bankCardNo","payerName","payTime","bonus","agentAlert","unMoneyAlert","e","tiemAlert"],"mappings":"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","sourcesContent":["import { Checkbox, Radio, Toast } from \"antd-mobile\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { saleList, receive, notReceive } from \"../request\"\nimport { mm_dd_hh_mm_ss2 } from \"@utils/dataTime\"\n//@ts-ignore\nimport sound from \"../img/sound.mp3\"\nimport \"../style.scss\"\nimport { toFixed } from \"@utils/numberUtils\";\nconst OnSale = () => {\n const [oneAlertState, setOneAlertState] = useState(false)\n const [agentAlertState, setAgentAlertState] = useState(false)\n const [unMoneyState, setUnMoneyState] = useState(false)\n const [radioState, setRadioState] = useState(false)\n const [data, setData] = useState<any>([])\n const [current, setCurrent] = useState<any>({})\n const soundControl = useRef<any>();\n useEffect(() => {\n  saleListHandle();\n  const id = setInterval(() => {\n   saleListHandle();\n  }, 3000);\n  return () => clearInterval(id);\n }, [])\n\n const saleListHandle = () => {\n  saleList().then((res: any) => {\n   Toast.hide()\n   soundControl.current && soundControl.current.pause()\n   let newData: any = []\n   let oldData: any = []\n   res.map((item: any) => newData.push(item.orderId))\n   data.map((item: any) => oldData.push(item.orderId))\n   let isHas = newData.filter((v: any) => { return oldData.indexOf(v) == -1 })\n   if (isHas.length > 0) {\n    try {\n     soundControl.current.play();\n    } catch (error) {\n    }\n    setData(res)\n   }\n  })\n }\n const receiveHandle = () => {\n  Toast.loading(\"提交中...\")\n  receive({ saleItemId: current.orderId }).then(data => {\n   setOneAlertState(false)\n   setAgentAlertState(false)\n   Toast.success(\"提交成功!\")\n  })\n }\n const notReceiveHandle = () => {\n  Toast.loading(\"提交中...\")\n  notReceive({ saleItemId: current.orderId }).then(data => {\n   setUnMoneyState(false)\n   setRadioState(false)\n   Toast.success(\"提交成功!\")\n  })\n }\n\n const oneAlert = () => {\n  return (\n   <div className=\"alert-container\">\n    <div className=\"on-sale-alert\">\n     <p className=\"alert-top\">收款确认</p>\n     <p className=\"alert-min\">\n      <span>请查看<i>【银行卡】</i>¥{toFixed(current.payAmount)}是否到账</span>\n      <div className=\"item\">\n       <p className=\"item-bank\">\n        <span>银行卡号:{current.bankCardNo}</span>\n        <span>付款人:{current.payerName}</span>\n       </p>\n       <p className=\"item-order\">\n        <span>订单编号:{current.orderId}</span>\n        <span>{mm_dd_hh_mm_ss2(current.payTime)}</span>\n       </p>\n       <div className=\"item-info\">\n        <span className=\"order-icon\"></span>\n        <p className=\"order-i\">\n         <span className=\"special\">¥{toFixed(current.payAmount)}</span>\n         <span>赚:<i className=\"info-icon\"></i>¥{toFixed(current.bonus)}</span>\n        </p>\n       </div>\n      </div>\n     </p>\n     <p className=\"alert-bottom\">\n      <span onClick={() => setOneAlertState(false)}>取消</span>\n      <span onClick={() => setAgentAlertState(true)}>已收到款</span>\n     </p>\n    </div>\n   </div>\n  )\n }\n\n const agentAlert = () => {\n  return (\n   <div className=\"alert-container\">\n    <div className=\"on-sale-alert\">\n     <p className=\"alert-top red-bg\">收款确认</p>\n     <p className=\"alert-min\">\n      <span>请再三确认,银行卡¥{toFixed(current.payAmount)}是否到账</span>\n      <div className=\"item\">\n       <p className=\"item-bank red-font\">\n        若未收到款，点击确认收款,造成资金损失自行承担\n       </p>\n       <p className=\"item-order text-min\">\n        如有不确定的订单请联系客服处理\n       </p>\n      </div>\n     </p>\n     <p className=\"alert-bottom\">\n      <span onClick={() => {\n       setOneAlertState(false)\n       setAgentAlertState(false)\n      }}>取消</span>\n      <span onClick={receiveHandle}>再次确认</span>\n     </p>\n    </div>\n   </div>\n  )\n }\n\n const unMoneyAlert = () => {\n  return (\n   <div className=\"alert-container\">\n    <div className=\"on-sale-alert\">\n     <p className=\"alert-top\">未收到款</p>\n     <p className=\"alert-min\">\n      <span className=\"yellow-font\">若已收到款项却点击【未收到款】,核实后可能会失去代售的机会</span>\n      <div className=\"item\">\n       <p className=\"item-bank  just-start\">\n        <Checkbox onChange={(e) => { setRadioState(!radioState) }} /> 我已认真阅读以上提示,确定没有收到款\n       </p>\n      </div>\n     </p>\n     <p className=\"alert-bottom\">\n      <span className={radioState ? \"\" : \"un-money\"} onClick={notReceiveHandle}>未收到款</span>\n      <span className={radioState ? \"\" : \"un-money\"} onClick={() => {\n       setUnMoneyState(false)\n       setRadioState(false)\n      }}>取消</span>\n     </p>\n    </div>\n   </div>\n  )\n }\n\n const tiemAlert = () => {\n  return (\n   <div className=\"alert-container\">\n    <div className=\"on-sale-alert\">\n     <p className=\"alert-top\">提示</p>\n     <p className=\"alert-min\">您有一笔订单已超时,请确认是否收款 并及时处理!</p>\n     <p className=\"alert-bottom\">\n      <span>确定</span>\n     </p>\n    </div>\n   </div>\n  )\n }\n return (\n  <>\n   { oneAlertState && oneAlert()}\n   { agentAlertState && agentAlert()}\n   { unMoneyState && unMoneyAlert()}\n   <ul className=\"consignments\">\n    <audio src={sound} ref={soundControl} preload=\"\" />\n    {\n     data && data.map((item: any) => {\n      return (\n       <li className=\"item\" key={item.orderId}>\n        <p className=\"item-bank\">\n         <span>银行卡号:{item.bankCardNo}</span>\n         <span>付款人:{item.payerName}</span>\n        </p>\n        <p className=\"item-order\">\n         <span>订单编号:{item.orderId}</span>\n         <span>{mm_dd_hh_mm_ss2(item.payTime)}</span>\n        </p>\n        <div className=\"item-info\">\n         <span className=\"order-icon\"></span>\n         <p className=\"order-i\">\n          <span className=\"special\">¥{toFixed(item.payAmount)}</span>\n          <span>赚:<i className=\"info-icon\"></i>¥{toFixed(item.bonus)}</span>\n         </p>\n         <span className=\"off-money\" onClick={() => {\n          setCurrent(item)\n          setUnMoneyState(true)\n         }}>未收到款</span>\n         <span className=\"on-money\" onClick={() => {\n          setCurrent(item)\n          setOneAlertState(true)\n         }}>已收到款</span>\n        </div>\n       </li>\n      )\n     })\n    }\n\n   </ul>\n  </>\n )\n}\nexport default OnSale;"]},"metadata":{},"sourceType":"module"}