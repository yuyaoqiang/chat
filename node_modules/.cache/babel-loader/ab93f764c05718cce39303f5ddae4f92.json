{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport \"antd-mobile/lib/toast/style/css\";\nimport _Toast from \"antd-mobile/lib/toast\";\n\nvar _jsxFileName = \"/Users/yuanfang/Downloads/Telegram Desktop/\\u5C01\\u5B58/advisory-h5/src/App.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from 'react';\nimport { Switch } from \"react-router-dom\";\nimport { observer, inject } from \"mobx-react\";\nimport AuthRoute from \"./utils/authRoute\";\nimport { ping } from \"@pages/userInfo/request\";\nimport { banks } from \"@pages/banks/request\";\nimport { myStatus } from \"@pages/home/request\";\nimport './App.scss';\nimport { transferArrayToObj } from '@utils/helpers';\n\n_Toast.config({\n  duration: 1.3\n});\n\nlet id;\n\nconst App = props => {\n  _s();\n\n  const {\n    userState,\n    banksState,\n    homeState\n  } = props;\n  const {\n    user\n  } = userState;\n  const {\n    setBanks\n  } = banksState;\n  const {\n    changeData\n  } = homeState;\n\n  const pings = () => {\n    ping({}).then(() => {}).catch(err => {});\n  };\n\n  const myInfoHandle = () => {\n    myStatus({}).then(data => {\n      changeData(data);\n    });\n  };\n\n  const banksStateHandle = () => {\n    banks().then(data => {\n      if (data && data.length > 0) {\n        let map = transferArrayToObj(data);\n        setBanks(map, data);\n      }\n    });\n  };\n\n  useEffect(() => {\n    if (user.isLogin) {\n      myInfoHandle();\n      banksStateHandle();\n      id = setInterval(() => {\n        pings();\n      }, 3000);\n      return () => clearInterval(id);\n    } else {\n      clearInterval(id);\n    }\n  }, [user]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Switch, {\n      children: /*#__PURE__*/_jsxDEV(AuthRoute, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(App, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c = App;\nexport default inject('userState', 'banksState', 'homeState')(observer(App));\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/yuanfang/Downloads/Telegram Desktop/封存/advisory-h5/src/App.tsx"],"names":["React","useEffect","Switch","observer","inject","AuthRoute","ping","banks","myStatus","transferArrayToObj","config","duration","id","App","props","userState","banksState","homeState","user","setBanks","changeData","pings","then","catch","err","myInfoHandle","data","banksStateHandle","length","map","isLogin","setInterval","clearInterval"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,MAAT,QAAwB,kBAAxB;AACA,SAASC,QAAT,EAAmBC,MAAnB,QAAiC,YAAjC;AACA,OAAOC,SAAP,MAAsB,mBAAtB;AACA,SAASC,IAAT,QAAqB,yBAArB;AACA,SAASC,KAAT,QAAsB,sBAAtB;AACA,SAASC,QAAT,QAAyB,qBAAzB;AACA,OAAO,YAAP;AAEA,SAASC,kBAAT,QAAmC,gBAAnC;;AACA,OAAMC,MAAN,CAAa;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAb;;AACA,IAAIC,EAAJ;;AACA,MAAMC,GAAG,GAAIC,KAAD,IAAgB;AAAA;;AAC1B,QAAM;AAAEC,IAAAA,SAAF;AAAaC,IAAAA,UAAb;AAAyBC,IAAAA;AAAzB,MAAuCH,KAA7C;AACA,QAAM;AAAEI,IAAAA;AAAF,MAAWH,SAAjB;AACA,QAAM;AAAEI,IAAAA;AAAF,MAAeH,UAArB;AACA,QAAM;AAAEI,IAAAA;AAAF,MAAiBH,SAAvB;;AACA,QAAMI,KAAK,GAAG,MAAM;AAClBf,IAAAA,IAAI,CAAC,EAAD,CAAJ,CAASgB,IAAT,CAAc,MAAM,CAAG,CAAvB,EAAyBC,KAAzB,CAA+BC,GAAG,IAAI,CACrC,CADD;AAED,GAHD;;AAIA,QAAMC,YAAY,GAAG,MAAM;AACzBjB,IAAAA,QAAQ,CAAC,EAAD,CAAR,CAAac,IAAb,CAAkBI,IAAI,IAAI;AACxBN,MAAAA,UAAU,CAACM,IAAD,CAAV;AACD,KAFD;AAGD,GAJD;;AAKA,QAAMC,gBAAgB,GAAG,MAAM;AAC7BpB,IAAAA,KAAK,GAAGe,IAAR,CAAcI,IAAD,IAAe;AAC1B,UAAIA,IAAI,IAAIA,IAAI,CAACE,MAAL,GAAc,CAA1B,EAA6B;AAC3B,YAAIC,GAAG,GAAGpB,kBAAkB,CAACiB,IAAD,CAA5B;AACAP,QAAAA,QAAQ,CAACU,GAAD,EAAMH,IAAN,CAAR;AACD;AACF,KALD;AAMD,GAPD;;AAQAzB,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIiB,IAAI,CAACY,OAAT,EAAkB;AAChBL,MAAAA,YAAY;AACZE,MAAAA,gBAAgB;AAChBf,MAAAA,EAAE,GAAGmB,WAAW,CAAC,MAAM;AACrBV,QAAAA,KAAK;AACN,OAFe,EAEb,IAFa,CAAhB;AAGA,aAAO,MAAMW,aAAa,CAACpB,EAAD,CAA1B;AACD,KAPD,MAOO;AACLoB,MAAAA,aAAa,CAACpB,EAAD,CAAb;AACD;AACF,GAXQ,EAWN,CAACM,IAAD,CAXM,CAAT;AAaA,sBACE;AAAA,2BACE,QAAC,MAAD;AAAA,6BACE,QAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF,mBADF;AAOD,CA1CD;;GAAML,G;;KAAAA,G;AA4CN,eAAeT,MAAM,CAAC,WAAD,EAAc,YAAd,EAA4B,WAA5B,CAAN,CAAgDD,QAAQ,CAACU,GAAD,CAAxD,CAAf","sourcesContent":["import React, { useEffect } from 'react';\nimport { Switch, } from \"react-router-dom\"\nimport { observer, inject } from \"mobx-react\";\nimport AuthRoute from \"./utils/authRoute\"\nimport { ping } from \"@pages/userInfo/request\"\nimport { banks } from \"@pages/banks/request\"\nimport { myStatus } from \"@pages/home/request\"\nimport './App.scss';\nimport { Toast } from 'antd-mobile';\nimport { transferArrayToObj } from '@utils/helpers';\nToast.config({ duration: 1.3 })\nlet id: any;\nconst App = (props: any) => {\n  const { userState, banksState, homeState } = props;\n  const { user } = userState;\n  const { setBanks } = banksState;\n  const { changeData } = homeState;\n  const pings = () => {\n    ping({}).then(() => { }).catch(err => {\n    })\n  }\n  const myInfoHandle = () => {\n    myStatus({}).then(data => {\n      changeData(data)\n    })\n  }\n  const banksStateHandle = () => {\n    banks().then((data: any) => {\n      if (data && data.length > 0) {\n        let map = transferArrayToObj(data)\n        setBanks(map, data)\n      }\n    })\n  }\n  useEffect(() => {\n    if (user.isLogin) {\n      myInfoHandle()\n      banksStateHandle()\n      id = setInterval(() => {\n        pings();\n      }, 3000);\n      return () => clearInterval(id);\n    } else {\n      clearInterval(id);\n    }\n  }, [user])\n\n  return (\n    <>\n      <Switch>\n        <AuthRoute></AuthRoute>\n      </Switch>\n    </>\n  )\n}\n\nexport default inject('userState', 'banksState', 'homeState')((observer(App)));"]},"metadata":{},"sourceType":"module"}