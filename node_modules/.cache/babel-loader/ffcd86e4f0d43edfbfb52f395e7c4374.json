{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport \"antd-mobile/lib/toast/style/css\";\nimport _Toast from \"antd-mobile/lib/toast\";\n\nvar _jsxFileName = \"/Users/yuanfang/Downloads/Telegram Desktop/\\u5C01\\u5B58/advisory-h5/src/pages/register/component/regTwo.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { checkcode } from \"../request\";\nimport { observer, inject } from \"mobx-react\";\nimport \"../style.scss\";\n\nconst RegTwo = props => {\n  _s();\n\n  let {\n    registerState\n  } = props;\n  let {\n    phoneNumber,\n    register,\n    changeStep\n  } = registerState;\n  const [timing, setTiming] = useState(true);\n  const [second, setSecond] = useState(60);\n  const [code, setCode] = useState('');\n  useEffect(() => {\n    let interval;\n\n    if (timing) {\n      interval = setInterval(() => {\n        setSecond(preSecond => {\n          if (preSecond <= 1) {\n            setTiming(false);\n            clearInterval(interval);\n            return 60;\n          } else {\n            return preSecond - 1;\n          }\n        });\n      }, 1000);\n    }\n\n    return () => clearInterval(interval);\n  }, [timing]);\n\n  const viliCode = () => {\n    if (code.length < 4) {\n      _Toast.fail(\"请输入正确的验证码\");\n\n      return;\n    }\n\n    _Toast.loading('Loading...');\n\n    checkcode({\n      data: {\n        code\n      }\n    }).then(res => {\n      if (res.code === 200 && res.data) {\n        changeStep(3);\n\n        _Toast.success(\"验证通过\");\n      } else {\n        _Toast.success(\"验证码输入错误\");\n      }\n    });\n  };\n\n  const reSentViliCode = () => {\n    register().then(res => {\n      _Toast.success(\"成功发送\");\n    });\n    setTiming(true);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main reg-two\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"reg-title\",\n      children: \"\\u6CE8\\u518C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"reg-mobile\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        autoFocus: true,\n        onChange: e => setCode(e.target.value),\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u9A8C\\u8BC1\\u7801\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"reset\",\n        onClick: () => reSentViliCode(),\n        children: timing ? second : '重新发送'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"reg-two-remark\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"\\u9A8C\\u8BC1\\u7801\\u5DF2\\u901A\\u8FC7\\u77ED\\u4FE1\\u53D1\\u9001\\u81F3 +86\", phoneNumber]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: code.length < 4 ? \"reg-btn\" : \"reg-btn activity\",\n      onClick: viliCode,\n      children: \"\\u786E\\u5B9A\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 3\n  }, this);\n};\n\n_s(RegTwo, \"Z4V46f7pOcWb3nLthTtZ+AqsC0I=\");\n\n_c = RegTwo;\nexport default inject('registerState')(observer(RegTwo));\n\nvar _c;\n\n$RefreshReg$(_c, \"RegTwo\");","map":{"version":3,"sources":["/Users/yuanfang/Downloads/Telegram Desktop/封存/advisory-h5/src/pages/register/component/regTwo.tsx"],"names":["React","useEffect","useState","checkcode","observer","inject","RegTwo","props","registerState","phoneNumber","register","changeStep","timing","setTiming","second","setSecond","code","setCode","interval","setInterval","preSecond","clearInterval","viliCode","length","fail","loading","data","then","res","success","reSentViliCode","e","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Toast } from \"antd-mobile\";\nimport { checkcode } from \"../request\"\nimport { observer, inject } from \"mobx-react\"\nimport \"../style.scss\"\nconst RegTwo = (props: any) => {\n let { registerState } = props;\n let { phoneNumber, register, changeStep } = registerState as RegisterStore;\n const [timing, setTiming] = useState(true)\n const [second, setSecond] = useState(60)\n const [code, setCode] = useState('');\n useEffect(() => {\n  let interval: any\n  if (timing) {\n   interval = setInterval(() => {\n    setSecond(preSecond => {\n     if (preSecond <= 1) {\n      setTiming(false)\n      clearInterval(interval)\n      return 60\n     } else {\n      return preSecond - 1\n     }\n    })\n   }, 1000)\n  }\n  return () => clearInterval(interval)\n }, [timing])\n\n const viliCode = () => {\n  if (code.length < 4) {\n   Toast.fail(\"请输入正确的验证码\");\n   return;\n  }\n  Toast.loading('Loading...')\n  checkcode({ data: { code } }).then((res: any) => {\n   if (res.code === 200 && res.data) {\n    changeStep(3);\n    Toast.success(\"验证通过\");\n   } else {\n    Toast.success(\"验证码输入错误\");\n   }\n  })\n }\n\n const reSentViliCode = () => {\n  register().then(res => {\n   Toast.success(\"成功发送\");\n  })\n  setTiming(true);\n }\n\n return (\n  <div className=\"main reg-two\">\n   <p className=\"reg-title\">注册</p>\n   {/* <p className=\"reg-remark\">\n    <span>验证码已通过短信发送至 +86{phoneNumber}</span>\n   </p> */}\n   <p className=\"reg-mobile\">\n    <input type=\"number\" autoFocus onChange={(e) => setCode(e.target.value)} placeholder=\"请输入验证码\" />\n    <span className=\"reset\" onClick={() => reSentViliCode()}>{timing ? second : '重新发送'}</span>\n   </p>\n   <p className=\"reg-two-remark\">\n    <span>验证码已通过短信发送至 +86{phoneNumber}</span>\n    {/* <span>收不到短信可能是被短信服务商通信问题，</span>\n    <span>或者被屏蔽， 请耐心等待或者重新发送申请</span> */}\n   </p>\n   <p className={code.length < 4 ? \"reg-btn\" : \"reg-btn activity\"} onClick={viliCode}>确定</p>\n  </div>\n )\n}\nexport default inject('registerState')((observer(RegTwo)));"]},"metadata":{},"sourceType":"module"}