{"ast":null,"code":"import \"antd-mobile/lib/toast/style/css\";\nimport _Toast from \"antd-mobile/lib/toast\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/yuanfang/code/chat/src/utils/authRoute.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { observer, inject } from \"mobx-react\";\nimport { Route, Redirect, useLocation } from \"react-router-dom\";\nimport routers from \"../routers\";\n\nconst AuthRoute = props => {\n  _s();\n\n  const {\n    pathname\n  } = useLocation();\n  const {\n    userState\n  } = props; // let { user } = userState as UserState;\n\n  let user = {\n    isLogin: false\n  };\n  const targetRouteObj = routers.find(item => item.path === pathname);\n  let {\n    component\n  } = targetRouteObj; // 不需要拦截的页面直接放行\n\n  if (targetRouteObj && !targetRouteObj.auth && !user.isLogin) {\n    return /*#__PURE__*/_jsxDEV(Route, {\n      path: pathname,\n      component: component\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 10\n    }, this);\n  }\n\n  if (user.isLogin) {\n    // 登录\n    if (pathname === \"/login\") {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 11\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(Route, {\n        path: pathname,\n        component: component\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 21,\n        columnNumber: 11\n      }, this);\n    }\n  } else {\n    // 未登录\n    if (targetRouteObj && targetRouteObj.auth) {\n      _Toast.info(\"请先登录\", 1.3);\n\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 11\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/404\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 11\n      }, this);\n    }\n  }\n};\n\n_s(AuthRoute, \"qVMqkCpYCjknUqSjfMln5RFSkbo=\", false, function () {\n  return [useLocation];\n});\n\n_c = AuthRoute;\nexport default inject('userState')(observer(AuthRoute));\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthRoute\");","map":{"version":3,"sources":["/Users/yuanfang/code/chat/src/utils/authRoute.tsx"],"names":["React","observer","inject","Route","Redirect","useLocation","routers","AuthRoute","props","pathname","userState","user","isLogin","targetRouteObj","find","item","path","component","auth","info"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,QAAT,EAAmBC,MAAnB,QAAiC,YAAjC;AACA,SAASC,KAAT,EAAgBC,QAAhB,EAA0BC,WAA1B,QAA6C,kBAA7C;AACA,OAAOC,OAAP,MAAoB,YAApB;;AACA,MAAMC,SAAS,GAAIC,KAAD,IAAgB;AAAA;;AACjC,QAAM;AAAEC,IAAAA;AAAF,MAAeJ,WAAW,EAAhC;AACA,QAAM;AAAEK,IAAAA;AAAF,MAAgBF,KAAtB,CAFiC,CAGjC;;AACA,MAAIG,IAAI,GAAG;AAACC,IAAAA,OAAO,EAAC;AAAT,GAAX;AACA,QAAMC,cAAmB,GAAGP,OAAO,CAACQ,IAAR,CAAcC,IAAD,IAAUA,IAAI,CAACC,IAAL,KAAcP,QAArC,CAA5B;AACA,MAAI;AAAEQ,IAAAA;AAAF,MAAgBJ,cAApB,CANiC,CAOjC;;AACA,MAAIA,cAAc,IAAI,CAACA,cAAc,CAACK,IAAlC,IAA0C,CAACP,IAAI,CAACC,OAApD,EAA6D;AAC5D,wBAAO,QAAC,KAAD;AAAO,MAAA,IAAI,EAAEH,QAAb;AAAuB,MAAA,SAAS,EAAEQ;AAAlC;AAAA;AAAA;AAAA;AAAA,YAAP;AACA;;AACD,MAAIN,IAAI,CAACC,OAAT,EAAkB;AAAE;AACnB,QAAIH,QAAQ,KAAK,QAAjB,EAA2B;AAC1B,0BAAO,QAAC,QAAD;AAAU,QAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,cAAP;AACA,KAFD,MAEO;AACN,0BAAO,QAAC,KAAD;AAAO,QAAA,IAAI,EAAEA,QAAb;AAAuB,QAAA,SAAS,EAAEQ;AAAlC;AAAA;AAAA;AAAA;AAAA,cAAP;AACA;AACD,GAND,MAMO;AAAE;AACR,QAAIJ,cAAc,IAAIA,cAAc,CAACK,IAArC,EAA2C;AAC1C,aAAMC,IAAN,CAAW,MAAX,EAAmB,GAAnB;;AACA,0BAAO,QAAC,QAAD;AAAU,QAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,cAAP;AACA,KAHD,MAGO;AACN,0BAAO,QAAC,QAAD;AAAU,QAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,cAAP;AACA;AACD;AACD,CAzBD;;GAAMZ,S;UACgBF,W;;;KADhBE,S;AA0BN,eAAeL,MAAM,CAAC,WAAD,CAAN,CAAqBD,QAAQ,CAACM,SAAD,CAA7B,CAAf","sourcesContent":["import React from \"react\"\nimport { Toast } from \"antd-mobile\";\nimport { observer, inject } from \"mobx-react\"\nimport { Route, Redirect, useLocation } from \"react-router-dom\"\nimport routers from \"../routers\"\nconst AuthRoute = (props: any) => {\n const { pathname } = useLocation();\n const { userState } = props;\n // let { user } = userState as UserState;\n let user = {isLogin:false}\n const targetRouteObj: any = routers.find((item) => item.path === pathname)\n let { component } = targetRouteObj\n // 不需要拦截的页面直接放行\n if (targetRouteObj && !targetRouteObj.auth && !user.isLogin) {\n  return <Route path={pathname} component={component}></Route>\n }\n if (user.isLogin) { // 登录\n  if (pathname === \"/login\") {\n   return <Redirect to=\"/\"></Redirect>\n  } else {\n   return <Route path={pathname} component={component}></Route>\n  }\n } else { // 未登录\n  if (targetRouteObj && targetRouteObj.auth) {\n   Toast.info(\"请先登录\", 1.3)\n   return <Redirect to=\"/login\" />\n  } else {\n   return <Redirect to=\"/404\" />\n  }\n }\n}\nexport default inject('userState')((observer(AuthRoute)));"]},"metadata":{},"sourceType":"module"}