{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import\"antd-mobile/lib/modal/style/css\";import _Modal from\"antd-mobile/lib/modal\";import\"antd-mobile/lib/toast/style/css\";import _Toast from\"antd-mobile/lib/toast\";import _slicedToArray from\"/Users/yuanfang/code/advisory-h5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import HeaderBar from\"@components/header\";import{useHistory}from\"react-router-dom\";import{queryBanks,deleteBank}from\"./request\";import{observer,inject}from\"mobx-react\";import\"./style.scss\";var Status;(function(Status){Status[\"WAIT_FOR_APPROVE\"]=\"\\u5BA1\\u6279\\u4E2D\";Status[\"ENABLE\"]=\"\\u542F\\u7528\";Status[\"DISABLE\"]=\"\\u7981\\u7528\";})(Status||(Status={}));var Banks=function Banks(props){var _useHistory=useHistory(),goBack=_useHistory.goBack,push=_useHistory.push;var banksState=props.banksState;var mapBanks=banksState.mapBanks;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),banks=_useState2[0],setBanks=_useState2[1];useEffect(function(){queryBanksHandle();},[]);var queryBanksHandle=function queryBanksHandle(){_Toast.loading(\"加载中...\");queryBanks().then(function(data){setBanks(data);_Toast.hide();});};var deleteBankHandle=function deleteBankHandle(row){var id=row.id;_Modal.alert('提示','确定删除银行卡?',[{text:'取消',onPress:function onPress(){return console.log('cancel');}},{text:'确定',onPress:function onPress(){_Toast.loading(\"加载中...\");deleteBank({cardId:id}).then(function(data){queryBanksHandle();_Toast.hide();});}}]);};return/*#__PURE__*/_jsxs(\"div\",{className:\"banks-wrap\",children:[/*#__PURE__*/_jsx(HeaderBar,{goback:goBack,title:\"银行卡\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"banks-container\",children:banks&&banks.map(function(item,index){return/*#__PURE__*/_jsxs(\"li\",{className:\"banks-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"bank-icon\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"back-right-wrap\",children:[item.status==='WAIT_FOR_APPROVE'&&/*#__PURE__*/_jsx(\"p\",{className:\"review-icon\"}),item.status==='ENABLE'&&/*#__PURE__*/_jsx(\"p\",{className:\"open-status\",children:\"\\u6B63\\u5E38\"}),item.status==='DISABLE'&&/*#__PURE__*/_jsx(\"p\",{className:\"close-status\",children:\"\\u62D2\\u7EDD\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"right-top\",children:[/*#__PURE__*/_jsx(\"span\",{children:mapBanks[item.bank]}),item.status!=='WAIT_FOR_APPROVE'&&/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return deleteBankHandle(item);},children:\"\\u5220\\u9664\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"right-min\",children:item.cardNo}),/*#__PURE__*/_jsxs(\"p\",{className:\"right-bottom\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u6301\\u5361\\u4EBA:\",item.owner]}),/*#__PURE__*/_jsxs(\"span\",{children:[item.province,\" \",item.city]})]})]})]},index);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-wrap\",onClick:function onClick(){return push('addBank');},children:[/*#__PURE__*/_jsx(\"span\",{className:\"add-icon\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u6DFB\\u52A0\\u94F6\\u884C\\u5361\"})]})]});};export default inject('banksState')(observer(Banks));","map":null,"metadata":{},"sourceType":"module"}