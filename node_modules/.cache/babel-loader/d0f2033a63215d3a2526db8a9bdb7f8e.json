{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import\"antd-mobile/lib/toast/style/css\";import _Toast from\"antd-mobile/lib/toast\";import _slicedToArray from\"/Users/yuanfang/Downloads/Telegram Desktop/\\u5C01\\u5B58/advisory-h5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useHistory}from\"react-router-dom\";import HeaderBar from\"@components/header\";import{observer,inject}from\"mobx-react\";import{login}from\"./request\";import\"./style.scss\";var Login=function Login(props){var _useHistory=useHistory(),push=_useHistory.push;var userState=props.userState;var history=useHistory();var _useState=useState(),_useState2=_slicedToArray(_useState,2),loginName=_useState2[0],setLoginName=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _ref=userState,updateUser=_ref.updateUser;var toLogin=function toLogin(){if(!loginName||!password){_Toast.fail(\"请输入账号或密码\",1.5);return;}_Toast.loading('Loading...',0);login({loginName:loginName,pwd:password}).then(function(res){updateUser({Authorization:res,isLogin:true});_Toast.success(\"欢迎您的到来！\");history.replace(\"/\");}).catch(function(err){_Toast.info(err.data.message);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[/*#__PURE__*/_jsx(HeaderBar,{goback:\"/\",title:\"\\u767B\\u5F55\"}),/*#__PURE__*/_jsx(\"div\",{className:\"login-top\",children:/*#__PURE__*/_jsx(\"p\",{onClick:function onClick(){push(\"/register\");},children:\"\\u6CE8\\u518C\\u8D26\\u53F7\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"inputs\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"icons account\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u8D26\\u53F7\\u540D\\u79F0\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u8D26\\u53F7\\u6216\\u624B\\u673A\\u53F7\",onChange:function onChange(e){return setLoginName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"inputs\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"icons pw\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u767B\\u5F55\\u5BC6\\u7801\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"\\u8BF7\\u8F93\\u5165\\u5BC6\\u7801\",onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"p\",{className:\"login-btn\",onClick:toLogin,children:\"\\u767B\\u5F55\"})]})]});};export default inject('userState')(observer(Login));","map":null,"metadata":{},"sourceType":"module"}