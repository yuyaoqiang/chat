{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/yuanfang/Downloads/Telegram Desktop/\\u5C01\\u5B58/advisory-h5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from\"react\";import NavBar from\"@components/navBar\";import TimerList from\"./component/list\";import TimerInfo from\"./component/info\";import Tasks from\"./component/task\";//@ts-ignore\nimport sound from\"./img/order_done.mp3\";import{timingTasks}from\"./request\";import{observer,inject}from\"mobx-react\";import'./style.scss';import{checkSound}from\"@utils/sound\";var tempData=[];var TimeMission=function TimeMission(props){var _useState=useState(1),_useState2=_slicedToArray(_useState,2),checkTab=_useState2[0],setCheckTab=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),transType=_useState4[0],setTransType=_useState4[1];var banksState=props.banksState;var mapBanks=banksState.mapBanks;var soundControl=useRef();var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),data=_useState6[0],setData=_useState6[1];var timingTasksHandle=function timingTasksHandle(){timingTasks({}).then(function(res){soundControl.current&&soundControl.current.pause();var newData=[];var oldData=[];res.map(function(item){return newData.push(item.taskId);});tempData.map(function(item){return oldData.push(item.taskId);});var isHas=newData.filter(function(v){return oldData.indexOf(v)==-1;});if(isHas.length>0){try{checkSound()&&soundControl.current.play();}catch(error){}}setData(res);tempData=res;});};useEffect(function(){var id=setInterval(function(){timingTasksHandle();},3000);return function(){return clearInterval(id);};},[]);useEffect(function(){if(checkTab===1){timingTasksHandle();}},[checkTab]);return/*#__PURE__*/_jsxs(\"div\",{className:\"timeMission-wrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"span\",{className:checkTab===1?\"check\":\"\",onClick:function onClick(){return setCheckTab(1);},children:\"\\u4EFB\\u52A1\\u5217\\u8868\"}),/*#__PURE__*/_jsx(\"span\",{className:checkTab===2?\"check\":\"\",onClick:function onClick(){return setCheckTab(2);},children:\"\\u6211\\u7684\\u4EFB\\u52A1\"}),/*#__PURE__*/_jsx(\"span\",{className:checkTab===3?\"check\":\"\",onClick:function onClick(){return setCheckTab(3);},children:\"\\u4EFB\\u52A1\\u8BB0\\u5F55\"})]}),/*#__PURE__*/_jsx(\"audio\",{src:sound,ref:soundControl,preload:\"\"}),checkTab===1&&/*#__PURE__*/_jsxs(\"div\",{className:\"transforms-wrap\",children:[/*#__PURE__*/_jsxs(\"p\",{className:transType?\"transform-check\":\"\",onClick:function onClick(){return setTransType(true);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"bank-card-icon\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u94F6\\u884C\\u5361\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:!transType?\"transform-check\":\"\",onClick:function onClick(){return setTransType(false);},children:[/*#__PURE__*/_jsx(\"i\",{className:\"ali-pay-icon\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u652F\\u4ED8\\u5B9D\"})]})]}),checkTab===1&&/*#__PURE__*/_jsx(TimerList,{transType:transType,data:data,mapBanks:mapBanks,setCheckTab:setCheckTab}),checkTab===2&&/*#__PURE__*/_jsx(TimerInfo,{mapBanks:mapBanks,onClick:function onClick(){return setCheckTab(3);}}),checkTab===3&&/*#__PURE__*/_jsx(Tasks,{}),/*#__PURE__*/_jsx(NavBar,{})]});};export default inject('homeState','banksState')(observer(TimeMission));","map":null,"metadata":{},"sourceType":"module"}