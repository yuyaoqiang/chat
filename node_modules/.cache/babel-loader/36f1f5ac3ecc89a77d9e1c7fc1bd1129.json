{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport \"antd-mobile/lib/toast/style/css\";\nimport _Toast from \"antd-mobile/lib/toast\";\n\nvar _jsxFileName = \"/Users/yuanfang/Downloads/Telegram Desktop/\\u5C01\\u5B58/advisory-h5/src/pages/register/component/regThree.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { save } from \"../request\";\nimport { useHistory } from \"react-router-dom\";\nimport { observer, inject } from \"mobx-react\";\nimport { login } from \"@pages/login/request\";\nimport \"../style.scss\";\n\nconst RegThree = props => {\n  _s();\n\n  const {\n    registerState,\n    userState\n  } = props;\n  const [pwd, setPwd] = useState();\n  const [verifyPwd, setVerifyPwd] = useState();\n  const history = useHistory();\n  let {\n    phoneNumber,\n    changeStep,\n    changePhoneNum\n  } = registerState;\n  let {\n    updateUser\n  } = userState;\n\n  const saveUser = () => {\n    if (pwd.length < 6 || pwd.length > 12) {\n      _Toast.fail(\"密码长度为6-12位\", 1.5);\n\n      return;\n    }\n\n    if (pwd !== verifyPwd) {\n      _Toast.fail(\"密码不一致,请重新输入\", 1.5);\n\n      return;\n    }\n\n    _Toast.loading('Loading...');\n\n    save({\n      data: {\n        nickname: phoneNumber,\n        password: pwd,\n        mobilePhone: phoneNumber\n      }\n    }).then(res => {\n      if (res.code === 200) {\n        login({\n          nickname: phoneNumber,\n          password: pwd\n        }).then(res => {\n          const {\n            sysUser\n          } = res.data;\n          changePhoneNum('');\n          changeStep(1);\n          updateUser({ ...sysUser,\n            isLogin: true\n          });\n          history.replace(\"/\");\n\n          _Toast.success(\"恭喜您,注册成功!\");\n        }).catch(err => {\n          _Toast.fail(err.msg);\n        });\n      }\n    }).catch(err => {\n      _Toast.fail(err.msg);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main reg-three\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"reg-title\",\n      children: \"\\u8BBE\\u7F6E\\u5BC6\\u7801\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"reg-mobile\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        autoFocus: true,\n        placeholder: \"6-12\\u4F4D\\u6570\\u5B57\\u6216\\u5BC6\\u7801\",\n        onChange: e => setPwd(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"reg-mobile\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"\\u786E\\u8BA4\\u5BC6\\u7801\",\n        onChange: e => setVerifyPwd(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"reg-btn\",\n      onClick: () => saveUser(),\n      children: \"\\u786E\\u8BA4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 3\n  }, this);\n};\n\n_s(RegThree, \"pr5iwewpVSSFc82C9m9iIACwPHk=\", false, function () {\n  return [useHistory];\n});\n\n_c = RegThree;\nexport default inject('registerState', 'userState')(observer(RegThree));\n\nvar _c;\n\n$RefreshReg$(_c, \"RegThree\");","map":{"version":3,"sources":["/Users/yuanfang/Downloads/Telegram Desktop/封存/advisory-h5/src/pages/register/component/regThree.tsx"],"names":["React","useState","save","useHistory","observer","inject","login","RegThree","props","registerState","userState","pwd","setPwd","verifyPwd","setVerifyPwd","history","phoneNumber","changeStep","changePhoneNum","updateUser","saveUser","length","fail","loading","data","nickname","password","mobilePhone","then","res","code","sysUser","isLogin","replace","success","catch","err","msg","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { save } from \"../request\"\nimport { Toast } from \"antd-mobile\";\nimport { useHistory } from \"react-router-dom\";\nimport { observer, inject } from \"mobx-react\"\nimport { login } from \"@pages/login/request\"\nimport \"../style.scss\"\nconst RegThree = (props: any) => {\n const { registerState, userState }: any = props;\n const [pwd, setPwd] = useState<any>()\n const [verifyPwd, setVerifyPwd] = useState<any>()\n const history = useHistory();\n let { phoneNumber, changeStep, changePhoneNum } = registerState as RegisterStore;\n let { updateUser } = userState as UserState;\n const saveUser = () => {\n  if (pwd.length < 6 || pwd.length > 12) {\n   Toast.fail(\"密码长度为6-12位\", 1.5);\n   return;\n  }\n  if (pwd !== verifyPwd) {\n   Toast.fail(\"密码不一致,请重新输入\", 1.5);\n   return;\n  }\n  Toast.loading('Loading...');\n  save({ data: { nickname: phoneNumber, password: pwd, mobilePhone: phoneNumber } }).then((res: any) => {\n   if (res.code === 200) {\n    login({ nickname: phoneNumber, password: pwd }).then(res => {\n     const { sysUser } = res.data;\n     changePhoneNum('');\n     changeStep(1);\n     updateUser({ ...sysUser, isLogin: true })\n     history.replace(\"/\");\n     Toast.success(\"恭喜您,注册成功!\");\n    }).catch((err) => {\n     Toast.fail(err.msg);\n    })\n   }\n  }).catch(err => {\n   Toast.fail(err.msg)\n  })\n }\n\n return (\n  <div className=\"main reg-three\">\n   <p className=\"reg-title\">设置密码</p>\n   <p className=\"reg-mobile\">\n    <input type=\"password\" autoFocus placeholder=\"6-12位数字或密码\" onChange={(e) => setPwd(e.target.value)} />\n   </p>\n   <p className=\"reg-mobile\">\n    <input type=\"password\" placeholder=\"确认密码\" onChange={(e) => setVerifyPwd(e.target.value)} />\n   </p>\n   <p className=\"reg-btn\" onClick={() => saveUser()}>确认</p>\n  </div>\n )\n}\nexport default inject('registerState', 'userState')((observer(RegThree)));"]},"metadata":{},"sourceType":"module"}