{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import\"antd-mobile/lib/checkbox/style/css\";import _Checkbox from\"antd-mobile/lib/checkbox\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import\"antd-mobile/lib/toast/style/css\";import _Toast from\"antd-mobile/lib/toast\";import _slicedToArray from\"/Users/yuanfang/Downloads/Telegram Desktop/\\u5C01\\u5B58/advisory-h5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{saleList,receive,notReceive}from\"../request\";import{downTime,mm_dd_hh_mm_ss2,mm_ss_zh,timeDisparity}from\"@utils/dataTime\";import{orderStatus}from\"../../consignmentRecord/entity\";//@ts-ignore\nimport\"../style.scss\";import{toFixed}from\"@utils/numberUtils\";var OnSale=function OnSale(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),oneAlertState=_useState2[0],setOneAlertState=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),agentAlertState=_useState4[0],setAgentAlertState=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),unMoneyState=_useState6[0],setUnMoneyState=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),radioState=_useState8[0],setRadioState=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),data=_useState10[0],setData=_useState10[1];var _useState11=useState({}),_useState12=_slicedToArray(_useState11,2),current=_useState12[0],setCurrent=_useState12[1];useEffect(function(){saleListHandle();var id=setInterval(function(){saleListHandle();},3000);return function(){return clearInterval(id);};},[]);var saleListHandle=function saleListHandle(){saleList().then(function(res){_Toast.hide();setData(res);});};var receiveHandle=function receiveHandle(){_Toast.loading(\"提交中...\");receive({saleItemId:current.saleItemId}).then(function(data){setOneAlertState(false);setAgentAlertState(false);_Toast.success(\"提交成功!\");});};var notReceiveHandle=function notReceiveHandle(){if(!radioState)return;_Toast.loading(\"提交中...\");notReceive({saleItemId:current.saleItemId}).then(function(data){setUnMoneyState(false);setRadioState(false);_Toast.success(\"提交成功!\");});};var oneAlert=function oneAlert(){return/*#__PURE__*/_jsx(\"div\",{className:\"alert-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"on-sale-alert\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"alert-top\",children:\"\\u6536\\u6B3E\\u786E\\u8BA4\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"alert-min\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u8BF7\\u67E5\\u770B\",/*#__PURE__*/_jsx(\"i\",{children:\"\\u3010\\u94F6\\u884C\\u5361\\u3011\"}),\"\\xA5\",toFixed(current.payAmount),\"\\u662F\\u5426\\u5230\\u8D26\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"item-bank\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u94F6\\u884C\\u5361\\u53F7:\",current.bankCardNo]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u4ED8\\u6B3E\\u4EBA:\",current.payerName]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-order\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u8BA2\\u5355\\u7F16\\u53F7:\",current.orderId]}),/*#__PURE__*/_jsx(\"span\",{children:mm_dd_hh_mm_ss2(current.payTime)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"order-icon\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"order-i\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"special\",children:[\"\\xA5\",toFixed(current.payAmount)]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u8D5A:\",/*#__PURE__*/_jsx(\"i\",{className:\"info-icon\"}),\"\\xA5\",toFixed(current.bonus)]})]})]})]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"alert-bottom\",children:[/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setOneAlertState(false);},children:\"\\u53D6\\u6D88\"}),/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setAgentAlertState(true);},children:\"\\u5DF2\\u6536\\u5230\\u6B3E\"})]})]})});};var agentAlert=function agentAlert(){return/*#__PURE__*/_jsx(\"div\",{className:\"alert-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"on-sale-alert\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"alert-top red-bg\",children:\"\\u6536\\u6B3E\\u786E\\u8BA4\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"alert-min\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u8BF7\\u518D\\u4E09\\u786E\\u8BA4,\\u94F6\\u884C\\u5361\\xA5\",toFixed(current.payAmount),\"\\u662F\\u5426\\u5230\\u8D26\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"item-bank red-font\",children:\"\\u82E5\\u672A\\u6536\\u5230\\u6B3E\\uFF0C\\u70B9\\u51FB\\u786E\\u8BA4\\u6536\\u6B3E,\\u9020\\u6210\\u8D44\\u91D1\\u635F\\u5931\\u81EA\\u884C\\u627F\\u62C5\"}),/*#__PURE__*/_jsx(\"p\",{className:\"item-order text-min\",children:\"\\u5982\\u6709\\u4E0D\\u786E\\u5B9A\\u7684\\u8BA2\\u5355\\u8BF7\\u8054\\u7CFB\\u5BA2\\u670D\\u5904\\u7406\"})]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"alert-bottom\",children:[/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){setOneAlertState(false);setAgentAlertState(false);},children:\"\\u53D6\\u6D88\"}),/*#__PURE__*/_jsx(\"span\",{onClick:receiveHandle,children:\"\\u518D\\u6B21\\u786E\\u8BA4\"})]})]})});};var unMoneyAlert=function unMoneyAlert(){return/*#__PURE__*/_jsx(\"div\",{className:\"alert-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"on-sale-alert\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"alert-top\",children:\"\\u672A\\u6536\\u5230\\u6B3E\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"alert-min\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"yellow-font\",children:\"\\u82E5\\u5DF2\\u6536\\u5230\\u6B3E\\u9879\\u5374\\u70B9\\u51FB\\u3010\\u672A\\u6536\\u5230\\u6B3E\\u3011,\\u6838\\u5B9E\\u540E\\u53EF\\u80FD\\u4F1A\\u5931\\u53BB\\u4EE3\\u552E\\u7684\\u673A\\u4F1A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"item\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"item-bank  just-start\",children:[/*#__PURE__*/_jsx(_Checkbox,{onChange:function onChange(e){setRadioState(!radioState);}}),\" \\u6211\\u5DF2\\u8BA4\\u771F\\u9605\\u8BFB\\u4EE5\\u4E0A\\u63D0\\u793A,\\u786E\\u5B9A\\u6CA1\\u6709\\u6536\\u5230\\u6B3E\"]})})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"alert-bottom\",children:[/*#__PURE__*/_jsx(\"span\",{className:radioState?\"\":\"un-money\",onClick:notReceiveHandle,children:\"\\u672A\\u6536\\u5230\\u6B3E\"}),/*#__PURE__*/_jsx(\"span\",{className:radioState?\"\":\"un-money\",onClick:function onClick(){setUnMoneyState(false);setRadioState(false);},children:\"\\u53D6\\u6D88\"})]})]})});};var tiemAlert=function tiemAlert(){return/*#__PURE__*/_jsx(\"div\",{className:\"alert-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"on-sale-alert\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"alert-top\",children:\"\\u63D0\\u793A\"}),/*#__PURE__*/_jsx(\"p\",{className:\"alert-min\",children:\"\\u60A8\\u6709\\u4E00\\u7B14\\u8BA2\\u5355\\u5DF2\\u8D85\\u65F6,\\u8BF7\\u786E\\u8BA4\\u662F\\u5426\\u6536\\u6B3E \\u5E76\\u53CA\\u65F6\\u5904\\u7406!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"alert-bottom\",children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u786E\\u5B9A\"})})]})});};var unSubmit=function unSubmit(item){return timeDisparity(item.endTime)?/*#__PURE__*/_jsx(\"span\",{className:\"on-money\",onClick:function onClick(){setCurrent(item);setUnMoneyState(true);},children:\"\\u672A\\u6536\\u5230\\u6B3E\"}):/*#__PURE__*/_jsx(\"span\",{className:\"off-money\",children:\"\\u672A\\u6536\\u5230\\u6B3E\"});};var toSubmit=function toSubmit(item){return/*#__PURE__*/_jsx(\"span\",{className:\"on-money\",onClick:function onClick(){setCurrent(item);setOneAlertState(true);},children:\"\\u5DF2\\u6536\\u5230\\u6B3E\"});};var alertUnSubmit=function alertUnSubmit(msg){return/*#__PURE__*/_jsx(\"span\",{className:\"off-money\",onClick:function onClick(){return _Toast.info(msg);},children:\"\\u672A\\u6536\\u5230\\u6B3E\"});};var alertToSubmit=function alertToSubmit(msg){return/*#__PURE__*/_jsx(\"span\",{className:\"off-money\",onClick:function onClick(){return _Toast.info(msg);},children:\"\\u5DF2\\u6536\\u5230\\u6B3E\"});};return/*#__PURE__*/_jsxs(_Fragment,{children:[oneAlertState&&oneAlert(),agentAlertState&&agentAlert(),unMoneyState&&unMoneyAlert(),/*#__PURE__*/_jsx(\"ul\",{className:\"consignments\",children:data&&data.map(function(item){return/*#__PURE__*/_jsxs(\"li\",{className:\"item\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"item-bank\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u94F6\\u884C\\u5361\\u53F7:\",item.bankCardNo]}),/*#__PURE__*/_jsxs(\"span\",{style:{textAlign:'right'},children:[\"\\u4ED8\\u6B3E\\u4EBA:\",item.payerName]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-order\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u8BA2\\u5355\\u7F16\\u53F7:\",item.orderId]}),/*#__PURE__*/_jsx(\"span\",{style:{textAlign:'right'},children:mm_dd_hh_mm_ss2(item.payTime)})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"item-order\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u8BA2\\u5355\\u72B6\\u6001:\",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:orderStatus[item.orderStatus]})]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u5012\\u8BA1\\u65F6:\",/*#__PURE__*/_jsx(\"span\",{style:{color:'red'},children:mm_ss_zh(downTime(item.endTime))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-info\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"order-icon\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"order-i\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"special\",children:[\"\\xA5\",toFixed(item.payAmount)]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u8D5A:\",/*#__PURE__*/_jsx(\"i\",{className:\"info-icon\"}),\"\\xA5\",toFixed(item.bonus)]})]}),// 待领取\nitem.orderStatus==='WAIT_USER_ACK'&&/*#__PURE__*/_jsxs(_Fragment,{children:[unSubmit(item),toSubmit(item)]}),// 复制补单\nitem.orderStatus==='COPY_LOCK'&&/*#__PURE__*/_jsxs(_Fragment,{children:[alertUnSubmit('请确认收款'),toSubmit(item)]}),// 掉单锁定\nitem.orderStatus==='RESUBMIT_LOCK'&&/*#__PURE__*/_jsxs(_Fragment,{children:[alertUnSubmit('请确认收款'),toSubmit(item)]}),// 领取超时\nitem.orderStatus==='SUBMIT_TIMEOUT'&&/*#__PURE__*/_jsxs(_Fragment,{children:[unSubmit(item),toSubmit(item)]}),!['SUBMIT_TIMEOUT','RESUBMIT_LOCK','COPY_LOCK','WAIT_USER_ACK'].includes(item.orderStatus)&&/*#__PURE__*/_jsxs(_Fragment,{children:[alertUnSubmit(item==='LOCKED'?'不能提交,请联系客服':'等待审核'),alertToSubmit(item==='LOCKED'?'不能提交,请联系客服':'等待审核')]})]})]},item.orderId);})})]});};export default OnSale;","map":null,"metadata":{},"sourceType":"module"}