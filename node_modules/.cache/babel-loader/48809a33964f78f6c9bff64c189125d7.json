{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport \"antd-mobile/lib/toast/style/css\";\nimport _Toast from \"antd-mobile/lib/toast\";\n\nvar _jsxFileName = \"/Users/yuanfang/Downloads/Telegram Desktop/\\u5C01\\u5B58/advisory-h5/src/pages/offTimer/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport HeaderBar from \"@components/header\";\nimport { useHistory } from \"react-router-dom\";\nimport { cancelTask, myTaskDetail } from \"./request\";\nimport './style.scss';\n\nconst OffTimer = () => {\n  _s();\n\n  const {\n    goBack\n  } = useHistory();\n  const [selectValue, setSelectValue] = useState(\"收款账号异常\");\n  const [imgUrl, setImgUrl] = useState(\"\");\n  const [detail, setDetail] = useState(null);\n  const [imgData, setImgData] = useState(null);\n  const [remark, setRemark] = useState(\"\");\n\n  const onChange = e => {\n    if (!e.target.files) return;\n    const file = e.target.files[0];\n\n    if (window.FileReader) {\n      var reader = new FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onloadend = function (e) {\n        //@ts-ignore\n        setImgData(e.target.result);\n      };\n\n      let data = new FormData();\n      data.append(\"file\", file, file.name);\n      setImgUrl(file);\n    }\n  };\n\n  const submit = () => {\n    debugger;\n\n    if (selectValue === \"收款账号异常\" && !imgUrl) {\n      _Toast.info(\"需要上传凭证\");\n\n      return;\n    }\n\n    if (!imgUrl) {\n      cancelTask(null, {\n        taskId: detail.taskOrderId,\n        cancelReason: encodeURI(selectValue),\n        remark: encodeURI(remark)\n      }).then(data => {\n        _Toast.success(\"提交成功\");\n      });\n      return;\n    }\n\n    let data = new FormData(); //@ts-ignore\n\n    data.append(\"file\", imgUrl, imgUrl.name);\n    cancelTask(data, {\n      taskId: detail.taskOrderId,\n      cancelReason: encodeURI(selectValue),\n      remark: encodeURI(remark)\n    }).then(data => {\n      _Toast.success(\"提交成功\");\n    });\n  };\n\n  const myTaskDetailHandle = () => {\n    myTaskDetail({}).then(data => {\n      setDetail(data);\n    });\n  };\n\n  useEffect(() => {\n    myTaskDetailHandle();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(HeaderBar, {\n      goback: goBack,\n      title: \"取消付款\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 10\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"select-wrap\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\u53D6\\u6D88\\u539F\\u56E0*\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        className: \"select\",\n        onChange: e => setSelectValue(e.target.value),\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\\u6536\\u6B3E\\u8D26\\u53F7\\u5F02\\u5E38\",\n          children: \"\\u6536\\u6B3E\\u8D26\\u53F7\\u5F02\\u5E38\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\\u81EA\\u8EAB\\u8D44\\u91D1\\u4E0D\\u8DB3\",\n          children: \"\\u81EA\\u8EAB\\u8D44\\u91D1\\u4E0D\\u8DB3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n          value: \"\\u5176\\u4ED6\",\n          children: \"\\u5176\\u4ED6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 16\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 10\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"select-wrap\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\u8BF4\\u660E*\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        rows: 4,\n        maxLength: 30,\n        className: \"select\",\n        onChange: e => setRemark(e)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 10\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"timer-update\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"vlidate\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"*\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 36\n        }, this), \"\\u4E0A\\u4F20\\u51ED\\u8BC1\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"update-wrap\",\n        children: imgData ? /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"update-img\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"task-img\",\n            src: imgData\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"image/png, image/jpeg, image/gif, image/jpg\",\n            multiple: false,\n            onChange: e => onChange(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 22\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"update-img\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            accept: \"image/png, image/jpeg, image/gif, image/jpg\",\n            multiple: false,\n            onChange: e => onChange(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 22\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 10\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"submit-btn\",\n      onClick: submit,\n      children: \"\\u63D0\\u4EA4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 10\n    }, this)]\n  }, void 0, true);\n};\n\n_s(OffTimer, \"tPJMyx1emdwgoxEBqyGgUZWGrsM=\", false, function () {\n  return [useHistory];\n});\n\n_c = OffTimer;\nexport default OffTimer;\n\nvar _c;\n\n$RefreshReg$(_c, \"OffTimer\");","map":{"version":3,"sources":["/Users/yuanfang/Downloads/Telegram Desktop/封存/advisory-h5/src/pages/offTimer/index.tsx"],"names":["React","useEffect","useState","HeaderBar","useHistory","cancelTask","myTaskDetail","OffTimer","goBack","selectValue","setSelectValue","imgUrl","setImgUrl","detail","setDetail","imgData","setImgData","remark","setRemark","onChange","e","target","files","file","window","FileReader","reader","readAsDataURL","onloadend","result","data","FormData","append","name","submit","info","taskId","taskOrderId","cancelReason","encodeURI","then","success","myTaskDetailHandle","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport HeaderBar from \"@components/header\"\nimport { useHistory } from \"react-router-dom\";\nimport { Toast } from \"antd-mobile\"\nimport { cancelTask, myTaskDetail } from \"./request\"\nimport './style.scss'\nconst OffTimer = () => {\n   const { goBack } = useHistory();\n   const [selectValue, setSelectValue] = useState<string>(\"收款账号异常\");\n   const [imgUrl, setImgUrl] = useState(\"\")\n   const [detail, setDetail] = useState<any>(null)\n   const [imgData, setImgData] = useState<any>(null)\n   const [remark, setRemark] = useState<any>(\"\")\n\n   const onChange = (e: any) => {\n      if (!e.target.files) return\n      const file = e.target.files[0];\n      if (window.FileReader) {\n         var reader = new FileReader();\n         reader.readAsDataURL(file);\n         reader.onloadend = function (e) {\n            //@ts-ignore\n            setImgData(e.target.result)\n         };\n         let data = new FormData();\n         data.append(\"file\", file, file.name)\n         setImgUrl(file)\n      }\n   }\n\n   const submit = () => {\n      debugger\n      if (selectValue === \"收款账号异常\" && !imgUrl) {\n         Toast.info(\"需要上传凭证\")\n         return;\n      }\n      if (!imgUrl) {\n         cancelTask(null, { taskId: detail.taskOrderId, cancelReason: encodeURI(selectValue), remark: encodeURI(remark) }).then(data => {\n            Toast.success(\"提交成功\");\n         })\n         return;\n      }\n      let data = new FormData();\n      //@ts-ignore\n      data.append(\"file\", imgUrl, imgUrl.name)\n      cancelTask(data, { taskId: detail.taskOrderId, cancelReason: encodeURI(selectValue), remark: encodeURI(remark) }).then(data => {\n         Toast.success(\"提交成功\");\n      })\n   }\n   const myTaskDetailHandle = () => {\n      myTaskDetail({}).then((data: any) => {\n         setDetail(data)\n      })\n   }\n   useEffect(() => {\n      myTaskDetailHandle()\n   }, [])\n   return (\n      <>\n         <HeaderBar goback={goBack} title={\"取消付款\"} />\n         <p className=\"select-wrap\">\n            <span>取消原因*</span>\n            <select className=\"select\" onChange={(e) => setSelectValue(e.target.value)}>\n               <option value=\"收款账号异常\">收款账号异常</option>\n               <option value=\"自身资金不足\">自身资金不足</option>\n               <option value=\"其他\">其他</option>\n            </select>\n         </p>\n         <p className=\"select-wrap\">\n            <span>说明*</span>\n            <textarea rows={4} maxLength={30} className=\"select\" onChange={(e) => setRemark(e)}>\n            </textarea>\n         </p>\n         <div className=\"timer-update\">\n            <p className=\"vlidate\"><span>*</span>上传凭证</p>\n            <p className=\"update-wrap\">\n               {\n                  imgData ?\n                     <span className=\"update-img\">\n                        <img className=\"task-img\" src={imgData} />\n                        <input type=\"file\" accept=\"image/png, image/jpeg, image/gif, image/jpg\" multiple={false} onChange={(e) => onChange(e)} />\n                     </span>\n                     :\n                     <span className=\"update-img\">\n                        <input type=\"file\" accept=\"image/png, image/jpeg, image/gif, image/jpg\" multiple={false} onChange={(e) => onChange(e)} />\n                     </span>\n               }\n            </p>\n         </div>\n         <p className=\"submit-btn\" onClick={submit}>提交</p>\n      </>\n\n   )\n}\nexport default OffTimer;"]},"metadata":{},"sourceType":"module"}