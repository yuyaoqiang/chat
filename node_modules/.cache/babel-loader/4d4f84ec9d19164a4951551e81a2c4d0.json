{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import\"antd-mobile/lib/toast/style/css\";import _Toast from\"antd-mobile/lib/toast\";import _slicedToArray from\"/Users/yuanfang/code/advisory-h5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{saleBankCard,saleBankCardStart,saleBankCardStop}from\"../request\";import\"../style.scss\";var status={'WORKING':'停止代售','IDLE':'开始代售'};var OnSale=function OnSale(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var banks=props.banks;useEffect(function(){saleBankCardHandle();},[]);var saleBankCardHandle=function saleBankCardHandle(){_Toast.loading(\"加载中\");saleBankCard().then(function(data){_Toast.hide();setData(data);});};var _onClick=function onClick(status,id){if(status=='WORKING'){stopSale(id);}else{startSale(id);}};var startSale=function startSale(cardId){saleBankCardStart({cardId:cardId}).then(function(data){_Toast.success(\"开启成功\");saleBankCardHandle();});};var stopSale=function stopSale(cardId){saleBankCardStop({cardId:cardId}).then(function(data){_Toast.success(\"停止成功\");saleBankCardHandle();});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"ul\",{className:\"agent-sale\",children:data&&data.map(function(item){return/*#__PURE__*/_jsxs(\"li\",{className:\"item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item-bank\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"agent-sale-icon\",children:banks[item.bankType]?banks[item.bankType].slice(0,1):''}),/*#__PURE__*/_jsxs(\"p\",{className:\"agent-sale-info\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[banks[item.bankType],\":\",item.cardNo]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u6301\\u5361\\u4EBA:\",item.owner]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item-info\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"order-i\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"special\",children:[\"\\u5DF2\\u63A5\\u5355\\u7B14\\u6570:\",item.orderCount]})}),/*#__PURE__*/_jsx(\"span\",{className:\"on-money\",onClick:function onClick(){return _onClick(item.status,item.bankCardId);},children:status[item.status]})]})]},item.bankCardId);})})});};export default OnSale;","map":null,"metadata":{},"sourceType":"module"}