{"ast":null,"code":"/**\r\n * Extracts Sanyo flavored Makernotes.\r\n */\nexports.extractMakernotes = function (data, makernoteOffset, tiffOffset) {\n  // List of vendor specific Makernote tags found on\n  // http://www.sno.phy.queensu.ca/~phil/exiftool/TagNames/Sanyo.html\n  var tags = {\n    0x00FF: \"MakerNoteOffset\",\n    0x0100: \"SanyoThumbnail\",\n    0x0200: \"SpecialMode\",\n    0x0201: \"SanyoQuality\",\n    0x0202: \"Macro\",\n    0x0204: \"DigitalZoom\",\n    0x0207: \"SoftwareVersion\",\n    0x0208: \"PictInfo\",\n    0x0209: \"CameraID\",\n    0x020E: \"SequentialShot\",\n    0x020F: \"WideRange\",\n    0x0210: \"ColorAdjustmentMode\",\n    0x0213: \"QuickShot\",\n    0x0214: \"SelfTimer\",\n    0x0216: \"VoiceMemo\",\n    0x0217: \"RecordShutterRelease\",\n    0x0218: \"FlickerReduce\",\n    0x0219: \"OpticalZoomOn\",\n    0x021B: \"DigitalZoomOn\",\n    0x021D: \"LightSourceSpecial\",\n    0x021E: \"Resaved\",\n    0x021F: \"SceneSelect\",\n    0x0223: function (entry) {\n      switch (entry.format) {\n        case 0x0005:\n          return \"ManualFocusDistance\";\n\n        case 0x0007:\n          return \"FaceInfo\";\n\n        default:\n          return false;\n      }\n    },\n    0x0224: \"SequenceShotInterval\",\n    0x0225: \"FlashMode\",\n    0x0E00: \"PrintIM\",\n    0x0F00: \"DataDump\"\n  }; // Sanyo flavored Makernote data starts after eight bytes\n\n  var ifdOffset = makernoteOffset + 8; // Get the number of entries and extract them\n\n  var numberOfEntries = data.getShort(ifdOffset, this.isBigEndian);\n\n  if (this.options.sanyoMaxEntries) {\n    numberOfEntries = Math.min(numberOfEntries, this.options.sanyoMaxEntries);\n  }\n\n  var makernoteData = {};\n\n  for (var i = 0; i < numberOfEntries; i++) {\n    var exifEntry = this.extractExifEntry(data, ifdOffset + 2 + i * 12, tiffOffset, this.isBigEndian, tags);\n\n    if (exifEntry && exifEntry.tagName) {\n      makernoteData[exifEntry.tagName] = exifEntry.value;\n    }\n  }\n\n  return makernoteData;\n};","map":null,"metadata":{},"sourceType":"script"}