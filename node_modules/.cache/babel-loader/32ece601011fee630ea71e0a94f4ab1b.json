{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import\"antd-mobile/lib/modal/style/css\";import _Modal from\"antd-mobile/lib/modal\";import\"antd-mobile/lib/toast/style/css\";import _Toast from\"antd-mobile/lib/toast\";import _slicedToArray from\"/Users/yuanfang/Downloads/Telegram Desktop/\\u5C01\\u5B58/advisory-h5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import HeaderBar from\"@components/header\";import{useHistory}from\"react-router-dom\";import{queryBanks,deleteBank}from\"./request\";import{observer,inject}from\"mobx-react\";import\"./style.scss\";var Status;(function(Status){Status[\"WAIT_FOR_APPROVE\"]=\"\\u5BA1\\u6279\\u4E2D\";Status[\"ENABLE\"]=\"\\u542F\\u7528\";Status[\"DISABLE\"]=\"\\u7981\\u7528\";})(Status||(Status={}));var Banks=function Banks(props){var _useHistory=useHistory(),goBack=_useHistory.goBack,push=_useHistory.push;var banksState=props.banksState;var mapBanks=banksState.mapBanks;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),banks=_useState2[0],setBanks=_useState2[1];useEffect(function(){queryBanksHandle();},[]);var queryBanksHandle=function queryBanksHandle(){_Toast.loading(\"加载中...\");queryBanks().then(function(data){setBanks(data);_Toast.hide();});};var deleteBankHandle=function deleteBankHandle(row){var id=row.id;_Modal.alert('提示','确定删除银行卡?',[{text:'取消',onPress:function onPress(){return console.log('cancel');}},{text:'确定',onPress:function onPress(){_Toast.loading(\"加载中...\");deleteBank({cardId:id}).then(function(data){queryBanksHandle();_Toast.hide();});}}]);};return/*#__PURE__*/_jsxs(\"div\",{className:\"banks-wrap\",children:[/*#__PURE__*/_jsx(HeaderBar,{goback:goBack,title:\"银行卡\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"banks-container\",children:banks&&banks.map(function(item,index){return/*#__PURE__*/_jsxs(\"li\",{className:\"banks-item\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"bank-icon\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"back-right-wrap\",children:[item.status==='WAIT_FOR_APPROVE'&&/*#__PURE__*/_jsx(\"p\",{className:\"review-icon\"}),item.status==='ENABLE'&&/*#__PURE__*/_jsx(\"p\",{className:\"open-status\",children:\"\\u6B63\\u5E38\"}),item.status==='DISABLE'&&/*#__PURE__*/_jsx(\"p\",{className:\"close-status\",children:\"\\u62D2\\u7EDD\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"right-top\",children:[/*#__PURE__*/_jsx(\"span\",{children:mapBanks[item.bank]}),item.status!=='WAIT_FOR_APPROVE'&&/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return deleteBankHandle(item);},children:\"\\u5220\\u9664\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"right-min\",children:item.cardNo}),/*#__PURE__*/_jsxs(\"p\",{className:\"right-bottom\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u6301\\u5361\\u4EBA:\",item.owner]}),/*#__PURE__*/_jsxs(\"span\",{children:[item.province,\" \",item.city]})]})]})]},index);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-wrap\",onClick:function onClick(){return push('addBank');},children:[/*#__PURE__*/_jsx(\"span\",{className:\"add-icon\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u6DFB\\u52A0\\u94F6\\u884C\\u5361\"})]})]});};export default inject('banksState')(observer(Banks));","map":{"version":3,"sources":["/Users/yuanfang/Downloads/Telegram Desktop/封存/advisory-h5/src/pages/banks/index.tsx"],"names":["React","useEffect","useState","HeaderBar","useHistory","queryBanks","deleteBank","observer","inject","Status","Banks","props","goBack","push","banksState","mapBanks","banks","setBanks","queryBanksHandle","loading","then","data","hide","deleteBankHandle","row","id","alert","text","onPress","console","log","cardId","map","item","index","status","bank","cardNo","owner","province","city"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport HeaderBar from \"@components/header\"\nimport { useHistory } from \"react-router-dom\";\nimport { queryBanks, deleteBank } from \"./request\";\nimport { observer, inject } from \"mobx-react\"\nimport \"./style.scss\"\nimport { Toast, Modal } from \"antd-mobile\";\nenum Status {\n \"WAIT_FOR_APPROVE\" = \"审批中\",\n \"ENABLE\" = \"启用\",\n \"DISABLE\" = \"禁用\",\n}\nconst Banks = (props: any) => {\n const { goBack, push } = useHistory();\n const { banksState } = props;\n const { mapBanks } = banksState;\n const [banks, setBanks] = useState<any>(null)\n useEffect(() => {\n  queryBanksHandle()\n }, [])\n const queryBanksHandle = () => {\n  Toast.loading(\"加载中...\")\n  queryBanks().then(data => {\n   setBanks(data)\n   Toast.hide();\n  })\n }\n const deleteBankHandle = (row:any) => {\n  let {id}= row;\n  Modal.alert('提示', '确定删除银行卡?', [\n   { text: '取消', onPress: () => console.log('cancel') },\n   {\n    text: '确定',\n    onPress: () => {\n     Toast.loading(\"加载中...\");\n     deleteBank({cardId:id}).then(data => {\n      queryBanksHandle();\n      Toast.hide();\n     })\n    }\n   },\n  ])\n\n\n }\n return (\n  <div className=\"banks-wrap\">\n   <HeaderBar goback={goBack} title={\"银行卡\"} />\n   <ul className=\"banks-container\">\n    {banks && banks.map((item: any, index: number) => {\n     return (\n      <li className=\"banks-item\" key={index}>\n       <span className=\"bank-icon\"></span>\n       <div className=\"back-right-wrap\">\n        {item.status === 'WAIT_FOR_APPROVE' && <p className=\"review-icon\"></p>}\n        {item.status === 'ENABLE' && <p className=\"open-status\">正常</p>}\n        {item.status === 'DISABLE' && <p className=\"close-status\">拒绝</p>}\n        <p className=\"right-top\">\n         <span>{mapBanks[item.bank]}</span>\n         {\n          item.status !== 'WAIT_FOR_APPROVE' && <span onClick={()=>deleteBankHandle(item)}>删除</span>\n         }\n        </p>\n        <p className=\"right-min\">{item.cardNo}</p>\n        <p className=\"right-bottom\">\n         <span>持卡人:{item.owner}</span>\n         <span>{item.province} {item.city}</span>\n        </p>\n       </div>\n      </li>\n     )\n    })}\n   </ul>\n   <div className=\"add-wrap\" onClick={() => push('addBank')}>\n    <span className=\"add-icon\"></span>\n    <span>添加银行卡</span>\n   </div>\n  </div >\n )\n}\nexport default inject('banksState')((observer(Banks)));"]},"metadata":{},"sourceType":"module"}