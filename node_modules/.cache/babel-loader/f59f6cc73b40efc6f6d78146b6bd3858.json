{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import\"antd-mobile/lib/toast/style/css\";import _Toast from\"antd-mobile/lib/toast\";import React,{useEffect}from'react';import{Switch}from\"react-router-dom\";import{observer,inject}from\"mobx-react\";import AuthRoute from\"./utils/authRoute\";import{ping}from\"@pages/userInfo/request\";import{banks}from\"@pages/banks/request\";import{myStatus}from\"@pages/home/request\";import'./App.scss';import{transferArrayToObj}from'@utils/helpers';_Toast.config({duration:1.3});var id=0;var App=function App(props){var userState=props.userState,banksState=props.banksState,homeState=props.homeState;var user=userState.user;var setBanks=banksState.setBanks;var changeData=homeState.changeData;var pings=function pings(){ping({}).then(function(){}).catch(function(err){});};var myInfoHandle=function myInfoHandle(){myStatus({}).then(function(data){changeData(data);});};var banksStateHandle=function banksStateHandle(){banks().then(function(data){if(data&&data.length>0){var map=transferArrayToObj(data);setBanks(map,data);}});};useEffect(function(){if(user.isLogin){myInfoHandle();banksStateHandle();var _id=setInterval(function(){if(!user.isLogin)return;myInfoHandle();pings();},3000);return function(){return clearInterval(_id);};}},[user]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Switch,{children:/*#__PURE__*/_jsx(AuthRoute,{})})});};export default inject('userState','banksState','homeState')(observer(App));","map":{"version":3,"sources":["/Users/yuanfang/Downloads/Telegram Desktop/封存/advisory-h5/src/App.tsx"],"names":["React","useEffect","Switch","observer","inject","AuthRoute","ping","banks","myStatus","transferArrayToObj","config","duration","id","App","props","userState","banksState","homeState","user","setBanks","changeData","pings","then","catch","err","myInfoHandle","data","banksStateHandle","length","map","isLogin","setInterval","clearInterval"],"mappings":"kLAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,MAAT,KAAwB,kBAAxB,CACA,OAASC,QAAT,CAAmBC,MAAnB,KAAiC,YAAjC,CACA,MAAOC,CAAAA,SAAP,KAAsB,mBAAtB,CACA,OAASC,IAAT,KAAqB,yBAArB,CACA,OAASC,KAAT,KAAsB,sBAAtB,CACA,OAASC,QAAT,KAAyB,qBAAzB,CACA,MAAO,YAAP,CAEA,OAASC,kBAAT,KAAmC,gBAAnC,CACA,OAAMC,MAAN,CAAa,CAAEC,QAAQ,CAAE,GAAZ,CAAb,EACA,GAAMC,CAAAA,EAAE,CAAG,CAAX,CACA,GAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,CAACC,KAAD,CAAgB,IAClBC,CAAAA,SADkB,CACmBD,KADnB,CAClBC,SADkB,CACPC,UADO,CACmBF,KADnB,CACPE,UADO,CACKC,SADL,CACmBH,KADnB,CACKG,SADL,IAElBC,CAAAA,IAFkB,CAETH,SAFS,CAElBG,IAFkB,IAGlBC,CAAAA,QAHkB,CAGLH,UAHK,CAGlBG,QAHkB,IAIlBC,CAAAA,UAJkB,CAIHH,SAJG,CAIlBG,UAJkB,CAK1B,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,CAClBf,IAAI,CAAC,EAAD,CAAJ,CAASgB,IAAT,CAAc,UAAM,CAAG,CAAvB,EAAyBC,KAAzB,CAA+B,SAAAC,GAAG,CAAI,CACrC,CADD,EAED,CAHD,CAIA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzBjB,QAAQ,CAAC,EAAD,CAAR,CAAac,IAAb,CAAkB,SAAAI,IAAI,CAAI,CACxBN,UAAU,CAACM,IAAD,CAAV,CACD,CAFD,EAGD,CAJD,CAKA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC7BpB,KAAK,GAAGe,IAAR,CAAa,SAACI,IAAD,CAAe,CAC1B,GAAIA,IAAI,EAAIA,IAAI,CAACE,MAAL,CAAc,CAA1B,CAA6B,CAC3B,GAAIC,CAAAA,GAAG,CAAGpB,kBAAkB,CAACiB,IAAD,CAA5B,CACAP,QAAQ,CAACU,GAAD,CAAMH,IAAN,CAAR,CACD,CACF,CALD,EAMD,CAPD,CAQAzB,SAAS,CAAC,UAAM,CACd,GAAIiB,IAAI,CAACY,OAAT,CAAkB,CAChBL,YAAY,GACZE,gBAAgB,GAChB,GAAMf,CAAAA,GAAE,CAAGmB,WAAW,CAAC,UAAM,CAC3B,GAAI,CAACb,IAAI,CAACY,OAAV,CAAmB,OACnBL,YAAY,GACZJ,KAAK,GACN,CAJqB,CAInB,IAJmB,CAAtB,CAKA,MAAO,kBAAMW,CAAAA,aAAa,CAACpB,GAAD,CAAnB,EAAP,CACD,CACF,CAXQ,CAWN,CAACM,IAAD,CAXM,CAAT,CAaA,mBACE,sCACE,KAAC,MAAD,wBACE,KAAC,SAAD,IADF,EADF,EADF,CAOD,CA1CD,CA4CA,cAAed,CAAAA,MAAM,CAAC,WAAD,CAAc,YAAd,CAA4B,WAA5B,CAAN,CAAgDD,QAAQ,CAACU,GAAD,CAAxD,CAAf","sourcesContent":["import React, { useEffect } from 'react';\nimport { Switch, } from \"react-router-dom\"\nimport { observer, inject } from \"mobx-react\";\nimport AuthRoute from \"./utils/authRoute\"\nimport { ping } from \"@pages/userInfo/request\"\nimport { banks } from \"@pages/banks/request\"\nimport { myStatus } from \"@pages/home/request\"\nimport './App.scss';\nimport { Toast } from 'antd-mobile';\nimport { transferArrayToObj } from '@utils/helpers';\nToast.config({ duration: 1.3 })\nconst id = 0;\nconst App = (props: any) => {\n  const { userState, banksState, homeState } = props;\n  const { user } = userState;\n  const { setBanks } = banksState;\n  const { changeData } = homeState;\n  const pings = () => {\n    ping({}).then(() => { }).catch(err => {\n    })\n  }\n  const myInfoHandle = () => {\n    myStatus({}).then(data => {\n      changeData(data)\n    })\n  }\n  const banksStateHandle = () => {\n    banks().then((data: any) => {\n      if (data && data.length > 0) {\n        let map = transferArrayToObj(data)\n        setBanks(map, data)\n      }\n    })\n  }\n  useEffect(() => {\n    if (user.isLogin) {\n      myInfoHandle()\n      banksStateHandle()\n      const id = setInterval(() => {\n        if (!user.isLogin) return;\n        myInfoHandle()\n        pings();\n      }, 3000);\n      return () => clearInterval(id);\n    }\n  }, [user])\n\n  return (\n    <>\n      <Switch>\n        <AuthRoute></AuthRoute>\n      </Switch>\n    </>\n  )\n}\n\nexport default inject('userState', 'banksState', 'homeState')((observer(App)));"]},"metadata":{},"sourceType":"module"}