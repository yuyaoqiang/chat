{"ast":null,"code":"import\"antd-mobile/lib/list-view/style/css\";import _ListView from\"antd-mobile/lib/list-view\";import\"antd-mobile/lib/pull-to-refresh/style/css\";import _PullToRefresh from\"antd-mobile/lib/pull-to-refresh\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/yuanfang/code/advisory-h5/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from\"react\";import{historyTasks}from\"../request\";import{mm_dd_hh_mm_ss2}from\"@utils/dataTime\";import{status}from\"./entity\";import'./style.scss';import{observer,inject}from\"mobx-react\";import usePaginationHooks from\"@hooks/usePaginationHooks\";import{toFixed}from\"@utils/numberUtils\";var OffTimer=function OffTimer(props){var commonState=props.commonState;var ref=useRef(null);var _useState=useState(5),_useState2=_slicedToArray(_useState,2),containerHeieght=_useState2[0],setContainerHeight=_useState2[1];var _usePaginationHooks=usePaginationHooks({queryPages:historyTasks}),setIndicator=_usePaginationHooks.setIndicator,setRefresing=_usePaginationHooks.setRefresing,indicator=_usePaginationHooks.indicator,refreshing=_usePaginationHooks.refreshing,dataSource=_usePaginationHooks.dataSource;useEffect(function(){var htmlFont=Number(document.documentElement.style.fontSize.slice(0,2));var clientHeight=commonState.clientHeight;var footerHeight=commonState.footerHeight;//@ts-ignore\nvar top=ReactDOM.findDOMNode(ref.current).offsetTop;setContainerHeight((clientHeight-footerHeight-top)/htmlFont);},[]);var returnIconType=function returnIconType(status){if(['FAIL','REFUSED'].includes(status)){return\"fail\";}if('SUCCESS'===status){return\"success\";}return\"waiting\";};var row=function row(rowData,sectionID,rowID){return/*#__PURE__*/_jsxs(\"li\",{className:\"timers-item\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"order-number\",children:[\"\\u8BA2\\u5355\\u53F7:\",rowData.taskId]}),/*#__PURE__*/_jsxs(\"div\",{className:\"task-bottom\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"left\",children:/*#__PURE__*/_jsx(\"i\",{className:rowData.bankType==='ALIPAY'?\"ali-pay-icon\":\"def-bank-icon\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"min\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"\\xA5\",toFixed(rowData.cashAmount)]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"\\u4EFB\\u52A1\\u5956\\u52B1:\",/*#__PURE__*/_jsx(\"i\",{}),toFixed(rowData.taskBonus)]}),/*#__PURE__*/_jsx(\"span\",{children:mm_dd_hh_mm_ss2(rowData.userLockTimeout)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"right\",children:[/*#__PURE__*/_jsx(\"span\",{className:returnIconType(rowData.status)}),/*#__PURE__*/_jsx(\"span\",{children:status[rowData.status]})]})]})]},rowID);};return/*#__PURE__*/_jsx(_ListView,{className:\"task-wrap\",ref:ref,style:{height:\"\".concat(containerHeieght,\"rem\")},dataSource:dataSource,renderFooter:function renderFooter(){return/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center'},children:!indicator?'正在加载中.....':'没有更多数据'});},renderRow:row,useBodyScroll:false//@ts-ignore\n,pullToRefresh:/*#__PURE__*/_jsx(_PullToRefresh,{refreshing:refreshing,onRefresh:setRefresing}),onEndReached:setIndicator,pageSize:20});};export default inject('commonState')(observer(OffTimer));","map":null,"metadata":{},"sourceType":"module"}