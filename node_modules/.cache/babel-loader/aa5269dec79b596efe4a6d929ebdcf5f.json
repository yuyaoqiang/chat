{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport \"antd-mobile/lib/checkbox/style/css\";\nimport _Checkbox from \"antd-mobile/lib/checkbox\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport \"antd-mobile/lib/toast/style/css\";\nimport _Toast from \"antd-mobile/lib/toast\";\n\nvar _jsxFileName = \"/Users/yuanfang/code/advisory-h5/src/pages/consignment/components/onSale.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { saleList, receive, notReceive } from \"../request\";\nimport { downTime, mm_dd_hh_mm_ss2, mm_ss_zh, timeDisparity } from \"@utils/dataTime\";\n//@ts-ignore\nimport \"../style.scss\"; //@ts-ignore\n\nimport sound from \"../img/sound.mp3\";\nimport { toFixed } from \"@utils/numberUtils\";\nimport { checkSound } from \"@utils/sound\";\nlet tempData = [];\n\nconst OnSale = () => {\n  _s();\n\n  const [oneAlertState, setOneAlertState] = useState(false);\n  const [agentAlertState, setAgentAlertState] = useState(false);\n  const [unMoneyState, setUnMoneyState] = useState(false);\n  const [radioState, setRadioState] = useState(false);\n  const [data, setData] = useState([]);\n  const [current, setCurrent] = useState({});\n  const soundControl = useRef();\n  useEffect(() => {\n    saleListHandle();\n    const id = setInterval(() => {\n      saleListHandle();\n    }, 3000);\n    return () => clearInterval(id);\n  }, []);\n\n  const saleListHandle = () => {\n    saleList({}).then(res => {\n      soundControl.current && soundControl.current.pause();\n      let newData = [];\n      let oldData = [];\n      res.map(item => newData.push(item.orderId));\n      tempData.map(item => oldData.push(item.orderId));\n      let isHas = newData.filter(v => {\n        return oldData.indexOf(v) == -1;\n      });\n\n      if (isHas.length > 0) {\n        try {\n          checkSound() && soundControl.current.play();\n        } catch (error) {}\n      }\n\n      setData(res);\n      tempData = res;\n    }); // saleList().then((res: any) => {\n    //   Toast.hide()\n    //   setData(res)\n    // })\n  };\n\n  const receiveHandle = () => {\n    _Toast.loading(\"提交中...\");\n\n    receive({\n      saleItemId: current.saleItemId\n    }).then(data => {\n      setOneAlertState(false);\n      setAgentAlertState(false);\n      saleListHandle();\n\n      _Toast.success(\"提交成功!\");\n    });\n  };\n\n  const notReceiveHandle = () => {\n    if (!radioState) return;\n\n    _Toast.loading(\"提交中...\");\n\n    notReceive({\n      saleItemId: current.saleItemId\n    }).then(data => {\n      setUnMoneyState(false);\n      setRadioState(false);\n      saleListHandle();\n\n      _Toast.success(\"提交成功!\");\n    });\n  };\n\n  const oneAlert = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"on-sale-alert\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"alert-top\",\n          children: \"\\u6536\\u6B3E\\u786E\\u8BA4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"alert-min\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"\\u8BF7\\u67E5\\u770B\", /*#__PURE__*/_jsxDEV(\"i\", {\n              children: \"\\u3010\\u94F6\\u884C\\u5361\\u3011\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 22\n            }, this), \"\\xA5\", toFixed(current.payAmount), \"\\u662F\\u5426\\u5230\\u8D26\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"item\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"item-bank\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"\\u94F6\\u884C\\u5361\\u53F7:\", current.bankCardNo]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"\\u4ED8\\u6B3E\\u4EBA:\", current.payerName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"item-order\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"\\u8BA2\\u5355\\u7F16\\u53F7:\", current.orderId]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"item-info\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"order-icon\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"order-i\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"special\",\n                  children: [\"\\xA5\", toFixed(current.payAmount)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: [\"\\u8D5A:\", /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"info-icon\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 90,\n                    columnNumber: 27\n                  }, this), \"\\xA5\", toFixed(current.bonus)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"alert-bottom\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: () => setOneAlertState(false),\n            children: \"\\u53D6\\u6D88\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: () => setAgentAlertState(true),\n            children: \"\\u5DF2\\u6536\\u5230\\u6B3E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this);\n  };\n\n  const agentAlert = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"on-sale-alert\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"alert-top red-bg\",\n          children: \"\\u6536\\u6B3E\\u786E\\u8BA4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"alert-min\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\"\\u8BF7\\u518D\\u4E09\\u786E\\u8BA4,\\u94F6\\u884C\\u5361\\xA5\", toFixed(current.payAmount), \"\\u662F\\u5426\\u5230\\u8D26\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"item\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"item-bank red-font\",\n              children: \"\\u82E5\\u672A\\u6536\\u5230\\u6B3E\\uFF0C\\u70B9\\u51FB\\u786E\\u8BA4\\u6536\\u6B3E,\\u9020\\u6210\\u8D44\\u91D1\\u635F\\u5931\\u81EA\\u884C\\u627F\\u62C5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"item-order text-min\",\n              children: \"\\u5982\\u6709\\u4E0D\\u786E\\u5B9A\\u7684\\u8BA2\\u5355\\u8BF7\\u8054\\u7CFB\\u5BA2\\u670D\\u5904\\u7406\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"alert-bottom\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: () => {\n              setOneAlertState(false);\n              setAgentAlertState(false);\n            },\n            children: \"\\u53D6\\u6D88\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            onClick: receiveHandle,\n            children: \"\\u518D\\u6B21\\u786E\\u8BA4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this);\n  };\n\n  const unMoneyAlert = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"on-sale-alert\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"alert-top\",\n          children: \"\\u672A\\u6536\\u5230\\u6B3E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"alert-min\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"yellow-font\",\n            children: \"\\u82E5\\u5DF2\\u6536\\u5230\\u6B3E\\u9879\\u5374\\u70B9\\u51FB\\u3010\\u672A\\u6536\\u5230\\u6B3E\\u3011,\\u6838\\u5B9E\\u540E\\u53EF\\u80FD\\u4F1A\\u5931\\u53BB\\u4EE3\\u552E\\u7684\\u673A\\u4F1A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"item\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"item-bank  just-start\",\n              children: [/*#__PURE__*/_jsxDEV(_Checkbox, {\n                onChange: e => {\n                  setRadioState(!radioState);\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 17\n              }, this), \" \\u6211\\u5DF2\\u8BA4\\u771F\\u9605\\u8BFB\\u4EE5\\u4E0A\\u63D0\\u793A,\\u786E\\u5B9A\\u6CA1\\u6709\\u6536\\u5230\\u6B3E\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"alert-bottom\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: radioState ? \"\" : \"un-money\",\n            onClick: notReceiveHandle,\n            children: \"\\u672A\\u6536\\u5230\\u6B3E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: radioState ? \"\" : \"un-money\",\n            onClick: () => {\n              setUnMoneyState(false);\n              setRadioState(false);\n            },\n            children: \"\\u53D6\\u6D88\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this);\n  };\n\n  const tiemAlert = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"on-sale-alert\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"alert-top\",\n          children: \"\\u63D0\\u793A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"alert-min\",\n          children: \"\\u60A8\\u6709\\u4E00\\u7B14\\u8BA2\\u5355\\u5DF2\\u8D85\\u65F6,\\u8BF7\\u786E\\u8BA4\\u662F\\u5426\\u6536\\u6B3E \\u5E76\\u53CA\\u65F6\\u5904\\u7406!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"alert-bottom\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\u786E\\u5B9A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this);\n  };\n\n  const unSubmit = item => {\n    return timeDisparity(item.endTime) ? /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"on-money\",\n      onClick: () => {\n        setCurrent(item);\n        setUnMoneyState(true);\n      },\n      children: \"\\u672A\\u6536\\u5230\\u6B3E\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"off-money\",\n      children: \"\\u672A\\u6536\\u5230\\u6B3E\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 9\n    }, this);\n  };\n\n  const toSubmit = item => {\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"on-money\",\n      onClick: () => {\n        setCurrent(item);\n        setOneAlertState(true);\n      },\n      children: \"\\u5DF2\\u6536\\u5230\\u6B3E\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 12\n    }, this);\n  };\n\n  const alertUnSubmit = msg => {\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"off-money\",\n      onClick: () => _Toast.info(msg),\n      children: \"\\u672A\\u6536\\u5230\\u6B3E\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 12\n    }, this);\n  };\n\n  const alertToSubmit = msg => {\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"off-money\",\n      onClick: () => _Toast.info(msg),\n      children: \"\\u5DF2\\u6536\\u5230\\u6B3E\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 12\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n      src: sound,\n      ref: soundControl,\n      preload: \"\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this), oneAlertState && oneAlert(), agentAlertState && agentAlert(), unMoneyState && unMoneyAlert(), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"consignments\",\n      children: data && data.map(item => {\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"item\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"item-bank\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\u94F6\\u884C\\u5361\\u53F7:\", item.bankCardNo]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 204,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                textAlign: 'right'\n              },\n              children: [\"\\u4ED8\\u6B3E\\u4EBA:\", item.payerName]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"item-order\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\u8BA2\\u5355\\u7F16\\u53F7:\", item.orderId]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                textAlign: 'right'\n              },\n              children: mm_dd_hh_mm_ss2(item.payTime)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"item-order\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\u8BA2\\u5355\\u72B6\\u6001:\", /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: 'red'\n                },\n                children: [item.orderStatus === 'SUCCESS' && !item.copyNewOrder ? '成功' : null, item.orderStatus === 'SUCCESS' && item.copyNewOrder ? '复制补单成功' : null, item.orderStatus === 'CHASE_SUCCESS' ? '已追回' : null, item.orderStatus === 'NOT_RECEIVE_MONEY' ? '失败' : null, item.orderStatus === 'WAIT_USER_ACK' && item.resetOrder ? '重置确认 ' : null, item.orderStatus === 'WAIT_USER_ACK' && item.dropOrder && !item.copyNewOrder && !item.resetOrder ? '掉单.待确认 ' : null, item.orderStatus === 'WAIT_USER_ACK' && item.copyNewOrder && !item.dropOrder ? '复制补单.待确认 ' : null, item.orderStatus === 'WAIT_USER_ACK' && item.copyNewOrder && item.dropOrder ? '复制补单：掉单.待确认 ' : null, item.orderStatus === 'WAIT_USER_ACK' && !item.resetOrder && !item.dropOrder && !item.copyNewOrder ? '等待会员确认' : null, item.orderStatus === 'SUBMIT_TIMEOUT' && !item.resetOrder && !item.dropOrder && !item.copyNewOrder ? '确认超时' : null, item.orderStatus === 'SUBMIT_TIMEOUT' && item.resetOrder ? '重置确认 ' : null, item.orderStatus === 'SUBMIT_TIMEOUT' && item.dropOrder && !item.copyNewOrder && !item.resetOrder ? '掉单.待确认 ' : null, item.orderStatus === 'SUBMIT_TIMEOUT' && item.copyNewOrder && !item.dropOrder ? '复制补单.待确认 ' : null, item.orderStatus === 'SUBMIT_TIMEOUT' && item.copyNewOrder && item.dropOrder ? '复制补单：掉单.待确认 ' : null, item.orderStatus === 'WAIT_PLATFORM_CHECK_FOR_NOT_RECEIVE' ? '待审核未到款' : null]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\u5012\\u8BA1\\u65F6:\", /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: 'red'\n                },\n                children: mm_ss_zh(downTime(item.endTime))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"item-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"order-icon\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"order-i\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"special\",\n                children: [\"\\xA5\", toFixed(item.payAmount)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"\\u8D5A:\", /*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"info-icon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 29\n                }, this), \"\\xA5\", toFixed(item.bonus)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 19\n            }, this), // 待确认\n            item.orderStatus === 'WAIT_USER_ACK' && !item.copyNewOrder && !item.resetOrder && !item.copyOrder && !item.dropOrder && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [unSubmit(item), toSubmit(item)]\n            }, void 0, true), // 重置确认\n            item.orderStatus === 'WAIT_USER_ACK' && item.resetOrder && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [unSubmit(item), toSubmit(item)]\n            }, void 0, true), // 复制补单 掉单重置 \n            item.orderStatus === 'WAIT_USER_ACK' && (item.copyNewOrder || item.dropOrder) && !item.resetOrder && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [alertUnSubmit('请确认收款'), toSubmit(item)]\n            }, void 0, true), // 领取超时\n            item.orderStatus === 'SUBMIT_TIMEOUT' && !item.copyNewOrder && !item.resetOrder && !item.copyOrder && !item.dropOrder && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [unSubmit(item), toSubmit(item)]\n            }, void 0, true), // 领取超时-复制补单等等\n            item.orderStatus === 'SUBMIT_TIMEOUT' && (item.copyNewOrder || item.copyOrder || item.dropOrder || item.resetOrder) && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [alertUnSubmit('请确认收款'), toSubmit(item)]\n            }, void 0, true), !['SUBMIT_TIMEOUT', 'WAIT_USER_ACK'].includes(item.orderStatus) && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [alertUnSubmit(item === 'LOCKED' ? '不能提交,请联系客服' : '等待审核'), alertToSubmit(item === 'LOCKED' ? '不能提交,请联系客服' : '等待审核')]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 17\n          }, this)]\n        }, item.orderId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(OnSale, \"dgcah6Hf1ncFpGKTfTHlRY3yBME=\");\n\n_c = OnSale;\nexport default OnSale;\n\nvar _c;\n\n$RefreshReg$(_c, \"OnSale\");","map":{"version":3,"sources":["/Users/yuanfang/code/advisory-h5/src/pages/consignment/components/onSale.tsx"],"names":["React","useEffect","useRef","useState","saleList","receive","notReceive","downTime","mm_dd_hh_mm_ss2","mm_ss_zh","timeDisparity","sound","toFixed","checkSound","tempData","OnSale","oneAlertState","setOneAlertState","agentAlertState","setAgentAlertState","unMoneyState","setUnMoneyState","radioState","setRadioState","data","setData","current","setCurrent","soundControl","saleListHandle","id","setInterval","clearInterval","then","res","pause","newData","oldData","map","item","push","orderId","isHas","filter","v","indexOf","length","play","error","receiveHandle","loading","saleItemId","success","notReceiveHandle","oneAlert","payAmount","bankCardNo","payerName","bonus","agentAlert","unMoneyAlert","e","tiemAlert","unSubmit","endTime","toSubmit","alertUnSubmit","msg","info","alertToSubmit","textAlign","payTime","color","orderStatus","copyNewOrder","resetOrder","dropOrder","copyOrder","includes"],"mappings":"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","sourcesContent":["import { Checkbox, Radio, Toast } from \"antd-mobile\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { saleList, receive, notReceive } from \"../request\"\nimport { downTime, mm_dd_hh_mm_ss2, mm_ss_zh, timeDisparity } from \"@utils/dataTime\"\nimport { orderStatus } from \"../../consignmentRecord/entity\"\n//@ts-ignore\nimport \"../style.scss\"\n//@ts-ignore\nimport sound from \"../img/sound.mp3\"\nimport { toFixed } from \"@utils/numberUtils\";\nimport { checkSound } from \"@utils/sound\";\nlet tempData :any= [];\nconst OnSale = () => {\n  const [oneAlertState, setOneAlertState] = useState(false)\n  const [agentAlertState, setAgentAlertState] = useState(false)\n  const [unMoneyState, setUnMoneyState] = useState(false)\n  const [radioState, setRadioState] = useState(false)\n  const [data, setData] = useState<any>([])\n  const [current, setCurrent] = useState<any>({})\n  const soundControl = useRef<any>();\n  useEffect(() => {\n    saleListHandle();\n    const id = setInterval(() => {\n      saleListHandle();\n    }, 3000);\n    return () => clearInterval(id);\n  }, [])\n \n  const saleListHandle = () => {\n    saleList({}).then((res: any) => {\n      soundControl.current && soundControl.current.pause()\n      let newData: any = []\n      let oldData: any = []\n      res.map((item: any) => newData.push(item.orderId))\n      tempData.map((item: any) => oldData.push(item.orderId))\n      let isHas = newData.filter((v: any) => { return oldData.indexOf(v) == -1 })\n      if (isHas.length > 0) {\n         try {\n            checkSound() && soundControl.current.play();\n         } catch (error) {\n         }\n      }\n      setData(res)\n      tempData  = res;\n   })\n    // saleList().then((res: any) => {\n    //   Toast.hide()\n    //   setData(res)\n    // })\n  }\n  const receiveHandle = () => {\n    Toast.loading(\"提交中...\")\n    receive({ saleItemId: current.saleItemId }).then(data => {\n      setOneAlertState(false)\n      setAgentAlertState(false)\n      saleListHandle();\n      Toast.success(\"提交成功!\")\n    })\n  }\n  const notReceiveHandle = () => {\n    if(!radioState)return;\n    Toast.loading(\"提交中...\")\n    notReceive({ saleItemId: current.saleItemId }).then(data => {\n      setUnMoneyState(false)\n      setRadioState(false)\n      saleListHandle();\n      Toast.success(\"提交成功!\")\n    })\n  }\n\n  const oneAlert = () => {\n    return (\n      <div className=\"alert-container\">\n        <div className=\"on-sale-alert\">\n          <p className=\"alert-top\">收款确认</p>\n          <p className=\"alert-min\">\n            <span>请查看<i>【银行卡】</i>¥{toFixed(current.payAmount)}是否到账</span>\n            <div className=\"item\">\n              <p className=\"item-bank\">\n                <span>银行卡号:{current.bankCardNo}</span>\n                <span>付款人:{current.payerName}</span>\n              </p>\n              <p className=\"item-order\">\n                <span>订单编号:{current.orderId}</span>\n              </p>\n              <div className=\"item-info\">\n                <span className=\"order-icon\"></span>\n                <p className=\"order-i\">\n                  <span className=\"special\">¥{toFixed(current.payAmount)}</span>\n                  <span>赚:<i className=\"info-icon\"></i>¥{toFixed(current.bonus)}</span>\n                </p>\n              </div>\n            </div>\n          </p>\n          <p className=\"alert-bottom\">\n            <span onClick={() => setOneAlertState(false)}>取消</span>\n            <span onClick={() => setAgentAlertState(true)}>已收到款</span>\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  const agentAlert = () => {\n    return (\n      <div className=\"alert-container\">\n        <div className=\"on-sale-alert\">\n          <p className=\"alert-top red-bg\">收款确认</p>\n          <p className=\"alert-min\">\n            <span>请再三确认,银行卡¥{toFixed(current.payAmount)}是否到账</span>\n            <div className=\"item\">\n              <p className=\"item-bank red-font\">\n                若未收到款，点击确认收款,造成资金损失自行承担\n       </p>\n              <p className=\"item-order text-min\">\n                如有不确定的订单请联系客服处理\n       </p>\n            </div>\n          </p>\n          <p className=\"alert-bottom\">\n            <span onClick={() => {\n              setOneAlertState(false)\n              setAgentAlertState(false)\n            }}>取消</span>\n            <span onClick={receiveHandle}>再次确认</span>\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  const unMoneyAlert = () => {\n    return (\n      <div className=\"alert-container\">\n        <div className=\"on-sale-alert\">\n          <p className=\"alert-top\">未收到款</p>\n          <p className=\"alert-min\">\n            <span className=\"yellow-font\">若已收到款项却点击【未收到款】,核实后可能会失去代售的机会</span>\n            <div className=\"item\">\n              <p className=\"item-bank  just-start\">\n                <Checkbox onChange={(e) => { setRadioState(!radioState) }} /> 我已认真阅读以上提示,确定没有收到款\n       </p>\n            </div>\n          </p>\n          <p className=\"alert-bottom\">\n            <span className={radioState ? \"\" : \"un-money\"} onClick={notReceiveHandle}>未收到款</span>\n            <span className={radioState ? \"\" : \"un-money\"} onClick={() => {\n              setUnMoneyState(false)\n              setRadioState(false)\n            }}>取消</span>\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  const tiemAlert = () => {\n    return (\n      <div className=\"alert-container\">\n        <div className=\"on-sale-alert\">\n          <p className=\"alert-top\">提示</p>\n          <p className=\"alert-min\">您有一笔订单已超时,请确认是否收款 并及时处理!</p>\n          <p className=\"alert-bottom\">\n            <span>确定</span>\n          </p>\n        </div>\n      </div>\n    )\n  }\n  const unSubmit = (item: any) => {\n    return timeDisparity(item.endTime) ? (\n      <span className=\"on-money\" onClick={() => {\n        setCurrent(item)\n        setUnMoneyState(true)\n      }}>未收到款</span>\n    ) : (\n        <span className=\"off-money\">未收到款</span>\n      )\n  }\n  const toSubmit = (item: any) => {\n    return <span className=\"on-money\" onClick={() => {\n      setCurrent(item)\n      setOneAlertState(true)\n    }}>已收到款</span>\n  }\n  const alertUnSubmit = (msg:string) => {\n    return <span className=\"off-money\" onClick={()=>Toast.info(msg)}>未收到款</span>\n  }\n  const alertToSubmit = (msg:string) => {\n    return <span className=\"off-money\" onClick={()=>Toast.info(msg)}>已收到款</span>\n  }\n  return (\n    <>\n      <audio src={sound} ref={soundControl} preload=\"\" />\n      { oneAlertState && oneAlert()}\n      { agentAlertState && agentAlert()}\n      { unMoneyState && unMoneyAlert()}\n      <ul className=\"consignments\">\n        {\n          data && data.map((item: any) => {\n            return (\n              <li className=\"item\" key={item.orderId}>\n                <p className=\"item-bank\">\n                  <span>银行卡号:{item.bankCardNo}</span>\n                  <span style={{ textAlign: 'right' }}>付款人:{item.payerName}</span>\n                </p>\n                <p className=\"item-order\">\n                  <span>订单编号:{item.orderId}</span>\n                  <span style={{ textAlign: 'right' }}>{mm_dd_hh_mm_ss2(item.payTime)}</span>\n                </p>\n                <p className=\"item-order\">\n                  <span>订单状态:\n                    <span style={{ color: 'red' }}>\n                      {/*  成功  掉单  */}\n                      {item.orderStatus === 'SUCCESS' && !item.copyNewOrder ?'成功':null}\n                      {/*  成功  复制补单成功  */}\n                      {item.orderStatus === 'SUCCESS' && item.copyNewOrder ?'复制补单成功':null}\n                      {/*  已追回  */}\n                      {item.orderStatus === 'CHASE_SUCCESS'  ?'已追回':null}\n                      {/*  失败  */}\n                      {item.orderStatus === 'NOT_RECEIVE_MONEY'  ?'失败':null}\n                      {/*  重置确认  */}\n                      {item.orderStatus === 'WAIT_USER_ACK' && item.resetOrder  ?'重置确认 ':null}\n                      {/*  掉单.待确认  */}\n                      {item.orderStatus === 'WAIT_USER_ACK' && item.dropOrder && !item.copyNewOrder &&!item.resetOrder ?'掉单.待确认 ':null}\n                      {/*  复制补单.待确认  */}\n                      {item.orderStatus === 'WAIT_USER_ACK' && item.copyNewOrder  && !item.dropOrder ?'复制补单.待确认 ':null}\n                      {/*  复制补单.待确认  */}\n                      {item.orderStatus === 'WAIT_USER_ACK' && item.copyNewOrder  && item.dropOrder ?'复制补单：掉单.待确认 ':null}\n                      {/*  等待会员确认  */}\n                      {item.orderStatus === 'WAIT_USER_ACK' && !item.resetOrder && !item.dropOrder && !item.copyNewOrder ?'等待会员确认':null}\n                      {/*  确认超时  */}\n                      {item.orderStatus === 'SUBMIT_TIMEOUT'  && !item.resetOrder && !item.dropOrder && !item.copyNewOrder ?'确认超时':null}\n                      {/*  确认超时 重置确认  */}\n                      {item.orderStatus === 'SUBMIT_TIMEOUT' && item.resetOrder  ?'重置确认 ':null}\n                      {/*  确认超时 掉单.待确认  */}\n                      {item.orderStatus === 'SUBMIT_TIMEOUT' && item.dropOrder && !item.copyNewOrder &&!item.resetOrder ?'掉单.待确认 ':null}\n                      {/*  确认超时 复制补单.待确认  */}\n                      {item.orderStatus === 'SUBMIT_TIMEOUT' && item.copyNewOrder  && !item.dropOrder ?'复制补单.待确认 ':null}\n                      {/*  确认超时 复制补单.待确认  */}\n                      {item.orderStatus === 'SUBMIT_TIMEOUT' && item.copyNewOrder  && item.dropOrder ?'复制补单：掉单.待确认 ':null}\n\n                      {/*  待审核未到款  */}\n                      {item.orderStatus === 'WAIT_PLATFORM_CHECK_FOR_NOT_RECEIVE' ?'待审核未到款':null}\n                    </span>\n                  </span>\n                  <span>倒计时:<span style={{ color: 'red' }}>{mm_ss_zh(downTime(item.endTime))}</span></span>\n                </p>\n                <div className=\"item-info\">\n                  <span className=\"order-icon\"></span>\n                  <p className=\"order-i\">\n                    <span className=\"special\">¥{toFixed(item.payAmount)}</span>\n                    <span>赚:<i className=\"info-icon\"></i>¥{toFixed(item.bonus)}</span>\n                  </p>\n                  {\n                    // 待确认\n                    item.orderStatus === 'WAIT_USER_ACK' && !item.copyNewOrder && !item.resetOrder && !item.copyOrder && !item.dropOrder && <>\n                      {unSubmit(item)}\n                      {toSubmit(item)}\n                    </>\n                  }\n                  {\n                    // 重置确认\n                    item.orderStatus === 'WAIT_USER_ACK' && item.resetOrder && <>\n                      {unSubmit(item)}\n                      {toSubmit(item)}\n                    </>\n                  }\n                  {\n                    // 复制补单 掉单重置 \n                    item.orderStatus === 'WAIT_USER_ACK' && (item.copyNewOrder || item.dropOrder ) &&!item.resetOrder && <>\n                       {alertUnSubmit('请确认收款')}\n                       {toSubmit(item)}\n                    </>\n                  }\n                  {\n                    // 领取超时\n                    item.orderStatus === 'SUBMIT_TIMEOUT' && !item.copyNewOrder && !item.resetOrder && !item.copyOrder && !item.dropOrder && (\n                      <>\n                        {unSubmit(item)}\n                        {toSubmit(item)}\n                      </>\n                    )\n                  }\n                  {\n                    // 领取超时-复制补单等等\n                    item.orderStatus === 'SUBMIT_TIMEOUT' && (item.copyNewOrder || item.copyOrder ||item.dropOrder||item.resetOrder) && (\n                      <>\n                        {alertUnSubmit('请确认收款')}\n                        {toSubmit(item)}\n                      </>\n                    )\n                  }\n                  {\n                    !['SUBMIT_TIMEOUT','WAIT_USER_ACK'].includes(item.orderStatus) && (\n                      <>\n                        {alertUnSubmit(item==='LOCKED'?'不能提交,请联系客服':'等待审核')}\n                        {alertToSubmit(item==='LOCKED'?'不能提交,请联系客服':'等待审核')}\n                      </>\n                    )\n                  }\n                </div>\n              </li>\n            )\n          })\n        }\n        {/* <span className=\"off-money\">未收到款</span>\n                        <span className=\"off-money\" >已收到款</span> */}\n      </ul>\n    </>\n  )\n}\nexport default OnSale;"]},"metadata":{},"sourceType":"module"}